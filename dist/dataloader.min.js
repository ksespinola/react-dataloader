!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react")):"function"==typeof define&&define.amd?define(["react"],e):"object"==typeof exports?exports.ReactDataloader=e(require("react")):t.ReactDataloader=e(t.React)}(this,function(t){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";var r=n(1),i=n(2),o=n(3),s=n(4),a=n(5);t.exports={FilteredDatasource:o,Datasource:r,DependentDatasource:i,Collection:s,ObjectTest:a}},function(t,e,n){"use strict";var r=n(6),i=n(9),o=n(10),s=n(7),a=n(8),u=r.createClass({displayName:"Datasource",propTypes:{name:r.PropTypes.string,basePath:r.PropTypes.string,endpoint:r.PropTypes.string,storeType:r.PropTypes.string.isRequired,idAttr:r.PropTypes.string,data:r.PropTypes.array},getDefaultProps:function(){return{idAttr:"id",storeType:"unique",data:[]}},mixins:[i.ListenerMixin,s],_buildProps:function(){var t=o.extend({},this.props);delete t.name,delete t.basePath,delete t.endpoint,delete t.idAttr,delete t.storeType;var e=this.state.data,n=this.dataSource&&this.dataSource.listenables;return o.extend(t,{data:e,actions:n})},getInitialState:function(){return{data:this.props.data}},_prepareDatasource:function(t){var e=t.name,n=t.basePath,r=t.endpoint,i=t.storeType,o=t.idAttr,s=t.headers;this.dataSource=a.instance().getStore({name:e,basePath:n,endpoint:r,storeType:i,idAttr:o,headers:s}),this.listenTo(this.dataSource,this.onStoreChange)},_reloadCollection:function(t){var e=this.dataSource.get(t);this.setState({data:e})},componentWillReceiveProps:function(t){t.name!==this.props.name?(this.stopListeningToAll(),this._prepareDatasource(t)):t.objectId!==this.props.objectId&&this._reloadCollection(t.objectId)},componentDidMount:function(){this._prepareDatasource(this.props),this._reloadCollection(this.props.objectId)},onStoreChange:function(t,e){this._reloadCollection(this.props.objectId)},render:function(){var t=this._cloneWithProps(this._buildProps());return r.createElement("div",null,t)}});t.exports=u},function(t,e,n){"use strict";var r=n(6),i=n(9),o=n(10),s=n(7),a=n(8),u=r.createClass({displayName:"DependentDatasource",propTypes:{name:r.PropTypes.string,basePath:r.PropTypes.string,endpoint:r.PropTypes.string,storeType:r.PropTypes.string.isRequired,idAttr:r.PropTypes.string,fkAttr:r.PropTypes.string,data:r.PropTypes.object.isRequired,tag:r.PropTypes.string},getDefaultProps:function(){return{idAttr:"id",fkAttr:"parent_id",data:{},storeType:"unique"}},mixins:[i.ListenerMixin,s],_buildProps:function(){var t=o.extend({},this.props);delete t.children,delete t.name,delete t.basePath,delete t.endpoint,delete t.idAttr,delete t.fkAttr,delete t.data,delete t.storeType,delete t.tag;var e=this.state.collection,n=this.dataSource&&this.dataSource.listenables;return o.extend(t,{data:e,actions:n})},getInitialState:function(){return{collection:this.props.collection}},_prepareDatasource:function(t){var e=t.name,n=t.basePath,r=t.endpoint,i=t.storeType,o=t.idAttr,s=t.headers;this.dataSource=a.instance().getStore({name:e,basePath:n,endpoint:r,storeType:i,idAttr:o,headers:s}),this.listenTo(this.dataSource,this.onStoreChange)},_updateDynamicView:function(t){var e=t.data,n=t.idAttr,r=t.fkAttr;if(e[n]){var i={};i[r]=e[n],this.dataSource.listenables.filter(this.props.tag,i)}},_reloadCollection:function(t){var e=this.dataSource.getCollection(t.tag);this.setState({collection:e})},componentWillReceiveProps:function(t){var e=t.idAttr;t.name!==this.props.name?(this.stopListeningToAll(),this._prepareDatasource(t)):t.endpoint!==this.props.endpoint&&this._prepareDatasource(t),t.data&&t.data[e]!==this.props.data[e]&&this._updateDynamicView(t)},componentDidMount:function(){this._prepareDatasource(this.props),this._updateDynamicView(this.props)},onStoreChange:function(t,e){this._reloadCollection(this.props)},render:function(){var t=this._cloneWithProps(this._buildProps());return r.createElement("div",null,t)}});t.exports=u},function(t,e,n){"use strict";var r=n(6),i=n(9),o=n(10),s=n(7),a=n(8),u=r.createClass({displayName:"FilteredDatasource",propTypes:{name:r.PropTypes.string,basePath:r.PropTypes.string,endpoint:r.PropTypes.string,storeType:r.PropTypes.string.isRequired,idAttr:r.PropTypes.string,collection:r.PropTypes.array,tag:r.PropTypes.string,sortBy:r.PropTypes.shape({attribute:r.PropTypes.string,isDescending:r.PropTypes["boolean"]}),filter:r.PropTypes.object},getDefaultProps:function(){return{idAttr:"id",storeType:"unique",collection:[]}},mixins:[i.ListenerMixin,s],_buildProps:function(){var t=o.extend({},this.props);delete t.children,delete t.name,delete t.basePath,delete t.endpoint,delete t.idAttr,delete t.storeType,delete t.tag;var e=this.state.collection,n=this.dataSource&&this.dataSource.listenables;return o.extend(t,{data:e,actions:n})},getInitialState:function(){return{collection:this.props.collection}},_prepareDatasource:function(t){var e=t.name,n=t.basePath,r=t.endpoint,i=t.storeType,o=t.idAttr,s=t.headers;this.dataSource=a.instance().getStore({name:e,basePath:n,endpoint:r,storeType:i,idAttr:o,headers:s}),this.listenTo(this.dataSource,this.onStoreChange)},_registerView:function(t){var e=t.tag,n=t.sortBy,r=t.filter;this.dataSource.listenables.registerView(e,{sortBy:n,filter:r})},_reloadCollection:function(t){var e=this.dataSource.getCollection(t.tag);this.setState({collection:e})},componentWillReceiveProps:function(t){t.name!==this.props.name?(this.stopListeningToAll(),this._prepareDatasource(t)):t.endpoint!==this.props.endpoint&&this._prepareDatasource(t)},componentDidMount:function(){this._prepareDatasource(this.props),this._registerView(this.props)},onStoreChange:function(t,e){this._reloadCollection(this.props)},render:function(){var t=this._cloneWithProps(this._buildProps());return r.createElement("div",null,t)}});t.exports=u},function(t,e,n){"use strict";var r=n(6),i=r.createClass({displayName:"Collection",propTypes:{data:r.PropTypes.array.isRequired},getDefaultProps:function(){return{data:[]}},render:function(){var t=this,e=Object.keys(this.props.data[0]||{});return r.createElement("section",null,r.createElement("table",{className:"item-list"},r.createElement(s,{keys:e}),r.createElement("tbody",null,this.props.data.map(function(e,n){return r.createElement(o,{object:e,key:e.id||n,onClick:t.props.handleSelect})}))))}}),o=r.createClass({displayName:"TableRow",propTypes:{object:r.PropTypes.object},render:function(){var t=this,e=this.props.onClick&&this.props.onClick.bind(null,this.props.object.id)||function(){};return r.createElement("tr",{onClick:e},Object.keys(this.props.object).map(function(e){return r.createElement("td",{key:e},JSON.stringify(t.props.object[e]))}))}}),s=r.createClass({displayName:"TableHeader",propTypes:{keys:r.PropTypes.array},render:function(){return r.createElement("thead",null,this.props.keys.map(function(t,e){return r.createElement("th",{key:e},t)}))}});t.exports=i},function(t,e,n){"use strict";var r=n(6),i=r.createClass({displayName:"ObjectTest",propTypes:{data:r.PropTypes.object.isRequired},getDefaultProps:function(){return{data:{}}},render:function(){var t=this;return r.createElement("table",{className:"edit"},Object.keys(this.props.data).map(function(e){return r.createElement("tr",null,r.createElement("th",null,e),r.createElement("td",null,t.props.data[e]))}))}});t.exports=i},function(e,n,r){e.exports=t},function(t,e,n){"use strict";var r=n(6),i=n(16),o={_fetchViewConfig:function(){return this.props.config.viewConfig||{}},_fetchDataConfig:function(){var t=this.props.config.dataConfig||{};return t!=={}||this.props.collection||this._warn("No dataConfig or collection specified!"),t},_cloneWithProps:function(t){return r.Children.map(this.props.children,function(e){return i(e,t)})},_warn:function(t){console.warn(this.constructor.displayName,t)}};t.exports=o},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(9),s=n(11),a=n(12),u={shared:n(13),unique:n(14)},c=function(){function t(){r(this,t),this.generatedStores={}}return i(t,[{key:"_memoizeStore",value:function(t){return this.generatedStores[t.name]||(this.generatedStores[t.name]=t),this.generatedStores[t.name]}},{key:"_getStore",value:function(t){return this.generatedStores[t]}},{key:"getStore",value:function(t){var e=t.name,n=t.storeType,r=this._getStore(e);return r?r:this[n||"unique"](t)}},{key:"shared",value:function(t){var e=t.name,n=new u.shared(t);n.listenables=s(e);var r=o.createStore(n),i=a(t,r);return i.populate(),this._memoizeStore(r),r}},{key:"unique",value:function(t){var e=t.name;e=""+e+Date.now();var n=new u.unique(t);n.listenables=s();var r=o.createStore(n),i=a(t,r);return i.populate(),r}}]),t}();t.exports={instance:function(){return window.DataStoreManager||(window.DataStoreManager=new c),window.DataStoreManager}}},function(t,e,n){t.exports=n(15)},function(t,e,n){var r,i;(function(){function n(t){function e(e,n,r,i,o,s){for(;o>=0&&s>o;o+=t){var a=i?i[o]:o;r=n(r,e[a],a,e)}return r}return function(n,r,i,o){r=x(r,o,4);var s=!E(n)&&b.keys(n),a=(s||n).length,u=t>0?0:a-1;return arguments.length<3&&(i=n[s?s[u]:u],u+=t),e(n,r,i,s,u,a)}}function o(t){return function(e,n,r){n=S(n,r);for(var i=null!=e&&e.length,o=t>0?0:i-1;o>=0&&i>o;o+=t)if(n(e[o],o,e))return o;return-1}}function s(t,e){var n=P.length,r=t.constructor,i=b.isFunction(r)&&r.prototype||h,o="constructor";for(b.has(t,o)&&!b.contains(e,o)&&e.push(o);n--;)o=P[n],o in t&&t[o]!==i[o]&&!b.contains(e,o)&&e.push(o)}var a=this,u=a._,c=Array.prototype,h=Object.prototype,f=Function.prototype,l=c.push,p=c.slice,d=h.toString,v=h.hasOwnProperty,y=Array.isArray,m=Object.keys,g=f.bind,_=Object.create,w=function(){},b=function(t){return t instanceof b?t:this instanceof b?void(this._wrapped=t):new b(t)};"undefined"!=typeof t&&t.exports&&(e=t.exports=b),e._=b,b.VERSION="1.8.2";var x=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return function(){return t.apply(e,arguments)}},S=function(t,e,n){return null==t?b.identity:b.isFunction(t)?x(t,e,n):b.isObject(t)?b.matcher(t):b.property(t)};b.iteratee=function(t,e){return S(t,e,1/0)};var I=function(t,e){return function(n){var r=arguments.length;if(2>r||null==n)return n;for(var i=1;r>i;i++)for(var o=arguments[i],s=t(o),a=s.length,u=0;a>u;u++){var c=s[u];e&&void 0!==n[c]||(n[c]=o[c])}return n}},k=function(t){if(!b.isObject(t))return{};if(_)return _(t);w.prototype=t;var e=new w;return w.prototype=null,e},O=Math.pow(2,53)-1,E=function(t){var e=t&&t.length;return"number"==typeof e&&e>=0&&O>=e};b.each=b.forEach=function(t,e,n){e=x(e,n);var r,i;if(E(t))for(r=0,i=t.length;i>r;r++)e(t[r],r,t);else{var o=b.keys(t);for(r=0,i=o.length;i>r;r++)e(t[o[r]],o[r],t)}return t},b.map=b.collect=function(t,e,n){e=S(e,n);for(var r=!E(t)&&b.keys(t),i=(r||t).length,o=Array(i),s=0;i>s;s++){var a=r?r[s]:s;o[s]=e(t[a],a,t)}return o},b.reduce=b.foldl=b.inject=n(1),b.reduceRight=b.foldr=n(-1),b.find=b.detect=function(t,e,n){var r;return r=E(t)?b.findIndex(t,e,n):b.findKey(t,e,n),void 0!==r&&-1!==r?t[r]:void 0},b.filter=b.select=function(t,e,n){var r=[];return e=S(e,n),b.each(t,function(t,n,i){e(t,n,i)&&r.push(t)}),r},b.reject=function(t,e,n){return b.filter(t,b.negate(S(e)),n)},b.every=b.all=function(t,e,n){e=S(e,n);for(var r=!E(t)&&b.keys(t),i=(r||t).length,o=0;i>o;o++){var s=r?r[o]:o;if(!e(t[s],s,t))return!1}return!0},b.some=b.any=function(t,e,n){e=S(e,n);for(var r=!E(t)&&b.keys(t),i=(r||t).length,o=0;i>o;o++){var s=r?r[o]:o;if(e(t[s],s,t))return!0}return!1},b.contains=b.includes=b.include=function(t,e,n){return E(t)||(t=b.values(t)),b.indexOf(t,e,"number"==typeof n&&n)>=0},b.invoke=function(t,e){var n=p.call(arguments,2),r=b.isFunction(e);return b.map(t,function(t){var i=r?e:t[e];return null==i?i:i.apply(t,n)})},b.pluck=function(t,e){return b.map(t,b.property(e))},b.where=function(t,e){return b.filter(t,b.matcher(e))},b.findWhere=function(t,e){return b.find(t,b.matcher(e))},b.max=function(t,e,n){var r,i,o=-(1/0),s=-(1/0);if(null==e&&null!=t){t=E(t)?t:b.values(t);for(var a=0,u=t.length;u>a;a++)r=t[a],r>o&&(o=r)}else e=S(e,n),b.each(t,function(t,n,r){i=e(t,n,r),(i>s||i===-(1/0)&&o===-(1/0))&&(o=t,s=i)});return o},b.min=function(t,e,n){var r,i,o=1/0,s=1/0;if(null==e&&null!=t){t=E(t)?t:b.values(t);for(var a=0,u=t.length;u>a;a++)r=t[a],o>r&&(o=r)}else e=S(e,n),b.each(t,function(t,n,r){i=e(t,n,r),(s>i||i===1/0&&o===1/0)&&(o=t,s=i)});return o},b.shuffle=function(t){for(var e,n=E(t)?t:b.values(t),r=n.length,i=Array(r),o=0;r>o;o++)e=b.random(0,o),e!==o&&(i[o]=i[e]),i[e]=n[o];return i},b.sample=function(t,e,n){return null==e||n?(E(t)||(t=b.values(t)),t[b.random(t.length-1)]):b.shuffle(t).slice(0,Math.max(0,e))},b.sortBy=function(t,e,n){return e=S(e,n),b.pluck(b.map(t,function(t,n,r){return{value:t,index:n,criteria:e(t,n,r)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return t.index-e.index}),"value")};var j=function(t){return function(e,n,r){var i={};return n=S(n,r),b.each(e,function(r,o){var s=n(r,o,e);t(i,r,s)}),i}};b.groupBy=j(function(t,e,n){b.has(t,n)?t[n].push(e):t[n]=[e]}),b.indexBy=j(function(t,e,n){t[n]=e}),b.countBy=j(function(t,e,n){b.has(t,n)?t[n]++:t[n]=1}),b.toArray=function(t){return t?b.isArray(t)?p.call(t):E(t)?b.map(t,b.identity):b.values(t):[]},b.size=function(t){return null==t?0:E(t)?t.length:b.keys(t).length},b.partition=function(t,e,n){e=S(e,n);var r=[],i=[];return b.each(t,function(t,n,o){(e(t,n,o)?r:i).push(t)}),[r,i]},b.first=b.head=b.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:b.initial(t,t.length-e)},b.initial=function(t,e,n){return p.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},b.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:b.rest(t,Math.max(0,t.length-e))},b.rest=b.tail=b.drop=function(t,e,n){return p.call(t,null==e||n?1:e)},b.compact=function(t){return b.filter(t,b.identity)};var D=function(t,e,n,r){for(var i=[],o=0,s=r||0,a=t&&t.length;a>s;s++){var u=t[s];if(E(u)&&(b.isArray(u)||b.isArguments(u))){e||(u=D(u,e,n));var c=0,h=u.length;for(i.length+=h;h>c;)i[o++]=u[c++]}else n||(i[o++]=u)}return i};b.flatten=function(t,e){return D(t,e,!1)},b.without=function(t){return b.difference(t,p.call(arguments,1))},b.uniq=b.unique=function(t,e,n,r){if(null==t)return[];b.isBoolean(e)||(r=n,n=e,e=!1),null!=n&&(n=S(n,r));for(var i=[],o=[],s=0,a=t.length;a>s;s++){var u=t[s],c=n?n(u,s,t):u;e?(s&&o===c||i.push(u),o=c):n?b.contains(o,c)||(o.push(c),i.push(u)):b.contains(i,u)||i.push(u)}return i},b.union=function(){return b.uniq(D(arguments,!0,!0))},b.intersection=function(t){if(null==t)return[];for(var e=[],n=arguments.length,r=0,i=t.length;i>r;r++){var o=t[r];if(!b.contains(e,o)){for(var s=1;n>s&&b.contains(arguments[s],o);s++);s===n&&e.push(o)}}return e},b.difference=function(t){var e=D(arguments,!0,!0,1);return b.filter(t,function(t){return!b.contains(e,t)})},b.zip=function(){return b.unzip(arguments)},b.unzip=function(t){for(var e=t&&b.max(t,"length").length||0,n=Array(e),r=0;e>r;r++)n[r]=b.pluck(t,r);return n},b.object=function(t,e){for(var n={},r=0,i=t&&t.length;i>r;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},b.indexOf=function(t,e,n){var r=0,i=t&&t.length;if("number"==typeof n)r=0>n?Math.max(0,i+n):n;else if(n&&i)return r=b.sortedIndex(t,e),t[r]===e?r:-1;if(e!==e)return b.findIndex(p.call(t,r),b.isNaN);for(;i>r;r++)if(t[r]===e)return r;return-1},b.lastIndexOf=function(t,e,n){var r=t?t.length:0;if("number"==typeof n&&(r=0>n?r+n+1:Math.min(r,n+1)),e!==e)return b.findLastIndex(p.call(t,0,r),b.isNaN);for(;--r>=0;)if(t[r]===e)return r;return-1},b.findIndex=o(1),b.findLastIndex=o(-1),b.sortedIndex=function(t,e,n,r){n=S(n,r,1);for(var i=n(e),o=0,s=t.length;s>o;){var a=Math.floor((o+s)/2);n(t[a])<i?o=a+1:s=a}return o},b.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=n||1;for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),o=0;r>o;o++,t+=n)i[o]=t;return i};var A=function(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var o=k(t.prototype),s=t.apply(o,i);return b.isObject(s)?s:o};b.bind=function(t,e){if(g&&t.bind===g)return g.apply(t,p.call(arguments,1));if(!b.isFunction(t))throw new TypeError("Bind must be called on a function");var n=p.call(arguments,2),r=function(){return A(t,r,e,this,n.concat(p.call(arguments)))};return r},b.partial=function(t){var e=p.call(arguments,1),n=function(){for(var r=0,i=e.length,o=Array(i),s=0;i>s;s++)o[s]=e[s]===b?arguments[r++]:e[s];for(;r<arguments.length;)o.push(arguments[r++]);return A(t,n,this,this,o)};return n},b.bindAll=function(t){var e,n,r=arguments.length;if(1>=r)throw new Error("bindAll must be passed function names");for(e=1;r>e;e++)n=arguments[e],t[n]=b.bind(t[n],t);return t},b.memoize=function(t,e){var n=function(r){var i=n.cache,o=""+(e?e.apply(this,arguments):r);return b.has(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return n.cache={},n},b.delay=function(t,e){var n=p.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},b.defer=b.partial(b.delay,b,1),b.throttle=function(t,e,n){var r,i,o,s=null,a=0;n||(n={});var u=function(){a=n.leading===!1?0:b.now(),s=null,o=t.apply(r,i),s||(r=i=null)};return function(){var c=b.now();a||n.leading!==!1||(a=c);var h=e-(c-a);return r=this,i=arguments,0>=h||h>e?(s&&(clearTimeout(s),s=null),a=c,o=t.apply(r,i),s||(r=i=null)):s||n.trailing===!1||(s=setTimeout(u,h)),o}},b.debounce=function(t,e,n){var r,i,o,s,a,u=function(){var c=b.now()-s;e>c&&c>=0?r=setTimeout(u,e-c):(r=null,n||(a=t.apply(o,i),r||(o=i=null)))};return function(){o=this,i=arguments,s=b.now();var c=n&&!r;return r||(r=setTimeout(u,e)),c&&(a=t.apply(o,i),o=i=null),a}},b.wrap=function(t,e){return b.partial(e,t)},b.negate=function(t){return function(){return!t.apply(this,arguments)}},b.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}},b.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},b.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),1>=t&&(e=null),n}},b.once=b.partial(b.before,2);var T=!{toString:null}.propertyIsEnumerable("toString"),P=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];b.keys=function(t){if(!b.isObject(t))return[];if(m)return m(t);var e=[];for(var n in t)b.has(t,n)&&e.push(n);return T&&s(t,e),e},b.allKeys=function(t){if(!b.isObject(t))return[];var e=[];for(var n in t)e.push(n);return T&&s(t,e),e},b.values=function(t){for(var e=b.keys(t),n=e.length,r=Array(n),i=0;n>i;i++)r[i]=t[e[i]];return r},b.mapObject=function(t,e,n){e=S(e,n);for(var r,i=b.keys(t),o=i.length,s={},a=0;o>a;a++)r=i[a],s[r]=e(t[r],r,t);return s},b.pairs=function(t){for(var e=b.keys(t),n=e.length,r=Array(n),i=0;n>i;i++)r[i]=[e[i],t[e[i]]];return r},b.invert=function(t){for(var e={},n=b.keys(t),r=0,i=n.length;i>r;r++)e[t[n[r]]]=n[r];return e},b.functions=b.methods=function(t){var e=[];for(var n in t)b.isFunction(t[n])&&e.push(n);return e.sort()},b.extend=I(b.allKeys),b.extendOwn=b.assign=I(b.keys),b.findKey=function(t,e,n){e=S(e,n);for(var r,i=b.keys(t),o=0,s=i.length;s>o;o++)if(r=i[o],e(t[r],r,t))return r},b.pick=function(t,e,n){var r,i,o={},s=t;if(null==s)return o;b.isFunction(e)?(i=b.allKeys(s),r=x(e,n)):(i=D(arguments,!1,!1,1),r=function(t,e,n){return e in n},s=Object(s));for(var a=0,u=i.length;u>a;a++){var c=i[a],h=s[c];r(h,c,s)&&(o[c]=h)}return o},b.omit=function(t,e,n){if(b.isFunction(e))e=b.negate(e);else{var r=b.map(D(arguments,!1,!1,1),String);e=function(t,e){return!b.contains(r,e)}}return b.pick(t,e,n)},b.defaults=I(b.allKeys,!0),b.clone=function(t){return b.isObject(t)?b.isArray(t)?t.slice():b.extend({},t):t},b.tap=function(t,e){return e(t),t},b.isMatch=function(t,e){var n=b.keys(e),r=n.length;if(null==t)return!r;for(var i=Object(t),o=0;r>o;o++){var s=n[o];if(e[s]!==i[s]||!(s in i))return!1}return!0};var z=function(t,e,n,r){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;t instanceof b&&(t=t._wrapped),e instanceof b&&(e=e._wrapped);var i=d.call(t);if(i!==d.call(e))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}var o="[object Array]"===i;if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var s=t.constructor,a=e.constructor;if(s!==a&&!(b.isFunction(s)&&s instanceof s&&b.isFunction(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],r=r||[];for(var u=n.length;u--;)if(n[u]===t)return r[u]===e;if(n.push(t),r.push(e),o){if(u=t.length,u!==e.length)return!1;for(;u--;)if(!z(t[u],e[u],n,r))return!1}else{var c,h=b.keys(t);if(u=h.length,b.keys(e).length!==u)return!1;for(;u--;)if(c=h[u],!b.has(e,c)||!z(t[c],e[c],n,r))return!1}return n.pop(),r.pop(),!0};b.isEqual=function(t,e){return z(t,e)},b.isEmpty=function(t){return null==t?!0:E(t)&&(b.isArray(t)||b.isString(t)||b.isArguments(t))?0===t.length:0===b.keys(t).length},b.isElement=function(t){return!(!t||1!==t.nodeType)},b.isArray=y||function(t){return"[object Array]"===d.call(t)},b.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},b.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){b["is"+t]=function(e){return d.call(e)==="[object "+t+"]"}}),b.isArguments(arguments)||(b.isArguments=function(t){return b.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(b.isFunction=function(t){return"function"==typeof t||!1}),b.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},b.isNaN=function(t){return b.isNumber(t)&&t!==+t},b.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===d.call(t)},b.isNull=function(t){return null===t},b.isUndefined=function(t){return void 0===t},b.has=function(t,e){return null!=t&&v.call(t,e)},b.noConflict=function(){return a._=u,this},b.identity=function(t){return t},b.constant=function(t){return function(){return t}},b.noop=function(){},b.property=function(t){return function(e){return null==e?void 0:e[t]}},b.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},b.matcher=b.matches=function(t){return t=b.extendOwn({},t),function(e){return b.isMatch(e,t)}},b.times=function(t,e,n){var r=Array(Math.max(0,t));e=x(e,n,1);for(var i=0;t>i;i++)r[i]=e(i);return r},b.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},b.now=Date.now||function(){return(new Date).getTime()};var M={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},C=b.invert(M),q=function(t){var e=function(e){return t[e]},n="(?:"+b.keys(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(i,e):t}};b.escape=q(M),b.unescape=q(C),b.result=function(t,e,n){var r=null==t?void 0:t[e];return void 0===r&&(r=n),b.isFunction(r)?r.call(t):r};var R=0;b.uniqueId=function(t){var e=++R+"";return t?t+e:e},b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/(.)^/,N={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},V=/\\|'|\r|\n|\u2028|\u2029/g,F=function(t){return"\\"+N[t]};b.template=function(t,e,n){!e&&n&&(e=n),e=b.defaults({},e,b.templateSettings);var r=RegExp([(e.escape||L).source,(e.interpolate||L).source,(e.evaluate||L).source].join("|")+"|$","g"),i=0,o="__p+='";t.replace(r,function(e,n,r,s,a){return o+=t.slice(i,a).replace(V,F),i=a+e.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":s&&(o+="';\n"+s+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var s=new Function(e.variable||"obj","_",o)}catch(a){throw a.source=o,a}var u=function(t){return s.call(this,t,b)},c=e.variable||"obj";return u.source="function("+c+"){\n"+o+"}",u},b.chain=function(t){var e=b(t);return e._chain=!0,e};var U=function(t,e){return t._chain?b(e).chain():e};b.mixin=function(t){b.each(b.functions(t),function(e){var n=b[e]=t[e];b.prototype[e]=function(){var t=[this._wrapped];return l.apply(t,arguments),U(this,n.apply(b,t))}})},b.mixin(b),b.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=c[t];b.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],U(this,n)}}),b.each(["concat","join","slice"],function(t){var e=c[t];b.prototype[t]=function(){return U(this,e.apply(this._wrapped,arguments))}}),b.prototype.value=function(){return this._wrapped},b.prototype.valueOf=b.prototype.toJSON=b.prototype.value,b.prototype.toString=function(){return""+this._wrapped},r=[],i=function(){return b}.apply(e,r),!(void 0!==i&&(t.exports=i))}).call(this)},function(t,e,n){"use strict";var r=n(9),i={},o=function(t){if(i[t])return i[t];var e=r.createActions(["add","update","destroy","filter","sort","registerView"]);return t&&(i[t]=e),e};t.exports=o},function(t,e,n){"use strict";var r=n(9),i=n(17),o=n(10),s={registerStore:function(t,e,n){this.store=e,this.idAttribute=t.idAttribute,this.client=new i(t),this.listenTo(e,this.onStoreChange)},onStoreChange:function(t,e){var n=["add","update","delete"];o.contains(n,t)&&this[t](e)},populate:function(){var t=this;this.client.getAll().then(function(e){t.store.destroyAll(),t.store.setCollection(e)}).fail(function(t){console.error(t)})},update:function(t){this.client.update(t).then(function(t){}).fail(function(t){console.error(t)})},destroy:function(t){this.client.destroy(t).then(function(t){}).fail(function(t){console.error(t)})},add:function(t){this.client.add(t).then(function(t){}).fail(function(t){console.error(t)})}};t.exports=function(t,e){var n=r.createStore(s);return n.registerStore(t,e),n}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t){var e=t.name,n=t.idAttr,r=(t.fk,u.getResource(e));return{name:e,collection:r,dynamicViews:{},init:function(){},add:function(t){this.collection.insert(t),this.trigger("add",t)},setCollection:function(t){this.collection.insert(t),this.trigger("setCollection",this.get())},destroy:function(t){this.collection.remove(this.get(t)),this.trigger("destroy",t)},destroyAll:function(){this.collection.removeDataOnly(),this.trigger("destroyAll",this.get())},update:function(t){this.collection.update(t),this.trigger("update",t)},get:function(t){if(!t)return this.collection.find({});var e={};return e[n]=t,this.collection.findOne(e)||{}},find:function(t){return this.collection.find(t)},getCollection:function(t){var e=this.collection.getDynamicView(t);return e?e.data():[]},filter:function(t,e){this.dynamicViews[t]?this.collection.removeDynamicView(t):this.dynamicViews[t]={};var n=this.dynamicViews[t];n.filter=e,this.registerView(t,n)},sort:function(t,e){this.dynamicViews[t]?this.collection.removeDynamicView(t):this.dynamicViews[t]={};var n=this.dynamicViews[t];n.sortBy=e,this.registerView(t,n)},registerView:function(t,e){var n=this.collection.addDynamicView(t);if(e){var r=e.filter,i=e.sortBy;i&&n.applySimpleSort(i.attribute,i.isDescending),r&&n.applyFind(r)}this.trigger("viewRegistered",t)}}}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(37),a=function(){function t(){r(this,t),this.dataSource=null,this.resources={}}return o(t,[{key:"getDS",value:function(){return this.dataSource?this.dataSource:(this.dataSource=new s,this.dataSource)}},{key:"getResource",value:function(t){var e=this.resources;if(e[t])return e[t];var n=this.getDS().addCollection(t);return e[t]=n,n}}]),t}(),u=new a;t.exports=i},function(t,e,n){"use strict";function r(t){var e=t.name,n=t.idAttr;return{name:e,dynamicViews:{},init:function(){this.collection=o([])},add:function(t){this.collection=this.collection.push(t),this.trigger("add",this.get())},setCollection:function(t){this.collection=o(t),this.trigger("setCollection",this.get())},destroy:function(t){this.collection=this.collection.filter(function(e){return t!==e[n]}),this.trigger("destroy",t)},destroyAll:function(){this.collection=o(),this.trigger("destroyAll",this.get())},update:function(t){this.collection=this.collection.filter(function(e){return t[n]!==e[n]}),this.collection=this.collection.push(t),this.trigger("update",t)},get:function(t){return t?this.collection.find(function(e){return e[n]===t})||{}:this.collection.toArray()},getCollection:function(t){return this.collection.toArray()}}}var i=n(36),o=i.List;t.exports=r},function(t,e,n){e.ActionMethods=n(18),e.ListenerMethods=n(19),e.PublisherMethods=n(20),e.StoreMethods=n(21),e.createAction=n(22),e.createStore=n(23),e.connect=n(24),e.connectFilter=n(25),e.ListenerMixin=n(26),e.listenTo=n(27),e.listenToMany=n(28);var r=n(29).staticJoinCreator;e.joinTrailing=e.all=r("last"),e.joinLeading=r("first"),e.joinStrict=r("strict"),e.joinConcat=r("all");var i=n(30);e.EventEmitter=i.EventEmitter,e.Promise=i.Promise,e.createActions=function(t){var n={};for(var r in t)if(t.hasOwnProperty(r)){var o=t[r],s=i.isObject(o)?r:o;n[s]=e.createAction(o)}return n},e.setEventEmitter=function(t){var r=n(30);e.EventEmitter=r.EventEmitter=t},e.setPromise=function(t){var r=n(30);e.Promise=r.Promise=t},e.setPromiseFactory=function(t){var e=n(30);e.createPromise=t},e.nextTick=function(t){var e=n(30);e.nextTick=t},e.__keep=n(31),Function.prototype.bind||console.error("Function.prototype.bind not available. ES5 shim required. https://github.com/spoike/refluxjs#es5")},function(t,e,n){(function(e){"use strict";function r(t,n){"production"!==e.env.NODE_ENV&&("production"!==e.env.NODE_ENV?a(!t.ref,"You are calling cloneWithProps() on a child with a ref. This is dangerous because you're creating a new child which will not be added as a ref to its parent."):null);var r=o.mergeProps(n,t.props);return!r.hasOwnProperty(u)&&t.props.hasOwnProperty(u)&&(r.children=t.props.children),i.createElement(t.type,r)}var i=n(32),o=n(33),s=n(34),a=n(35),u=s({children:null});t.exports=r}).call(e,n(38))},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(46),s=n(50),a=function(){function t(e){r(this,t),this.basePath=e.basePath,this.endpoint=e.endpoint,this.headerOptions=e.headers}return i(t,[{key:"_getResourceUrl",value:function(){return""+this.basePath+this.endpoint}},{key:"_getObjectUrl",value:function(t){return""+this.basePath+this.endpoint+"/"+t}},{key:"add",value:function(t){var e=o.defer(),n=this._getResourceUrl();return s.post(n).send(t).set(this.headerOptions).end(function(t,r){return t?e.reject(t):(300<r.status&&r.status<500&&console.warn("ClientError:",r.status,n),e.resolve(r.body))}),e.promise}},{key:"destroy",value:function(t){var e=o.defer(),n=this._getObjectUrl(t);return s.del(n).set(this.headerOptions).end(function(t,r){
return t?e.reject(t):(300<r.status&&r.status<500&&console.warn("ClientError:",r.status,n),e.resolve(r.body))}),e.promise}},{key:"update",value:function(t){var e=o.defer(),n=this._getObjectUrl(t.id);return s.put(n).send(t).set(this.headerOptions).end(function(t,r){return t?e.reject(t):(300<r.status&&r.status<500&&console.warn("ClientError:",r.status,n),e.resolve(r.body))}),e.promise}},{key:"get",value:function(t){var e=o.defer(),n=this._getObjectUrl(t);return s.get(n).set(this.headerOptions).end(function(t,r){return t?e.reject(t):(300<r.status&&r.status<500&&console.warn("ClientError:",r.status,n),e.resolve(r.body))}),e.promise}},{key:"getAll",value:function(){var t=o.defer(),e=this._getResourceUrl();return s.get(e).set(this.headerOptions).end(function(n,r){return n?t.reject(n):(300<r.status&&r.status<500&&console.warn("ClientError:",r.status,e),t.resolve(r.body))}),t.promise}}]),t}();e["default"]=a,t.exports=e["default"]},function(t,e,n){t.exports={}},function(t,e,n){var r=n(30),i=n(29).instanceJoinCreator,o=function(t){for(var e,n=0,r={};n<(t.children||[]).length;++n)e=t.children[n],t[e]&&(r[e]=t[e]);return r},s=function(t){var e={};for(var n in t){var i=t[n],a=o(i),u=s(a);e[n]=i;for(var c in u){var h=u[c];e[n+r.capitalize(c)]=h}}return e};t.exports={hasListener:function(t){for(var e,n,r,i=0;i<(this.subscriptions||[]).length;++i)for(r=[].concat(this.subscriptions[i].listenable),e=0;e<r.length;e++)if(n=r[e],n===t||n.hasListener&&n.hasListener(t))return!0;return!1},listenToMany:function(t){var e=s(t);for(var n in e){var i=r.callbackName(n),o=this[i]?i:this[n]?n:void 0;o&&this.listenTo(e[n],o,this[i+"Default"]||this[o+"Default"]||o)}},validateListening:function(t){return t===this?"Listener is not able to listen to itself":r.isFunction(t.listen)?t.hasListener&&t.hasListener(this)?"Listener cannot listen to this listenable because of circular loop":void 0:t+" is missing a listen method"},listenTo:function(t,e,n){var i,o,s,a=this.subscriptions=this.subscriptions||[];return r.throwIf(this.validateListening(t)),this.fetchInitialState(t,n),i=t.listen(this[e]||e,this),o=function(){var t=a.indexOf(s);r.throwIf(-1===t,"Tried to remove listen already gone from subscriptions list!"),a.splice(t,1),i()},s={stop:o,listenable:t},a.push(s),s},stopListeningTo:function(t){for(var e,n=0,i=this.subscriptions||[];n<i.length;n++)if(e=i[n],e.listenable===t)return e.stop(),r.throwIf(-1!==i.indexOf(e),"Failed to remove listen from subscriptions list!"),!0;return!1},stopListeningToAll:function(){for(var t,e=this.subscriptions||[];t=e.length;)e[0].stop(),r.throwIf(e.length!==t-1,"Failed to remove listen from subscriptions list!")},fetchInitialState:function(t,e){e=e&&this[e]||e;var n=this;if(r.isFunction(e)&&r.isFunction(t.getInitialState)){var i=t.getInitialState();i&&r.isFunction(i.then)?i.then(function(){e.apply(n,arguments)}):e.call(this,i)}},joinTrailing:i("last"),joinLeading:i("first"),joinConcat:i("all"),joinStrict:i("strict")}},function(t,e,n){var r=n(30);t.exports={preEmit:function(){},shouldEmit:function(){return!0},listen:function(t,e){e=e||this;var n=function(n){i||t.apply(e,n)},r=this,i=!1;return this.emitter.addListener(this.eventLabel,n),function(){i=!0,r.emitter.removeListener(r.eventLabel,n)}},promise:function(t){var e=this,n=this.children.indexOf("completed")>=0&&this.children.indexOf("failed")>=0;if(!n)throw new Error('Publisher must have "completed" and "failed" child publishers');t.then(function(t){return e.completed(t)},function(t){return e.failed(t)})},listenAndPromise:function(t,e){var n=this;e=e||this,this.willCallPromise=(this.willCallPromise||0)+1;var r=this.listen(function(){if(!t)throw new Error("Expected a function returning a promise but got "+t);var r=arguments,i=t.apply(e,r);return n.promise.call(n,i)},e);return function(){n.willCallPromise--,r.call(n)}},trigger:function(){var t=arguments,e=this.preEmit.apply(this,t);t=void 0===e?t:r.isArguments(e)?e:[].concat(e),this.shouldEmit.apply(this,t)&&this.emitter.emit(this.eventLabel,t)},triggerAsync:function(){var t=arguments,e=this;r.nextTick(function(){e.trigger.apply(e,t)})},triggerPromise:function(){var t=this,e=arguments,n=this.children.indexOf("completed")>=0&&this.children.indexOf("failed")>=0,i=r.createPromise(function(i,o){if(t.willCallPromise)return void r.nextTick(function(){var n=t.promise;t.promise=function(e){return e.then(i,o),t.promise=n,t.promise.apply(t,arguments)},t.trigger.apply(t,e)});if(n)var s=t.completed.listen(function(t){s(),a(),i(t)}),a=t.failed.listen(function(t){s(),a(),o(t)});t.triggerAsync.apply(t,e),n||i()});return i}}},function(t,e,n){t.exports={}},function(t,e,n){var r=n(30),i=n(15),o=n(31),s={preEmit:1,shouldEmit:1},a=function(t){t=t||{},r.isObject(t)||(t={actionName:t});for(var e in i.ActionMethods)if(!s[e]&&i.PublisherMethods[e])throw new Error("Cannot override API method "+e+" in Reflux.ActionMethods. Use another method name or override it on Reflux.PublisherMethods instead.");for(var n in t)if(!s[n]&&i.PublisherMethods[n])throw new Error("Cannot override API method "+n+" in action creation. Use another method name or override it on Reflux.PublisherMethods instead.");t.children=t.children||[],t.asyncResult&&(t.children=t.children.concat(["completed","failed"]));for(var u=0,c={};u<t.children.length;u++){var h=t.children[u];c[h]=a(h)}var f=r.extend({eventLabel:"action",emitter:new r.EventEmitter,_isAction:!0},i.PublisherMethods,i.ActionMethods,t),l=function(){return l[l.sync?"trigger":"triggerPromise"].apply(l,arguments)};return r.extend(l,c,f),o.createdActions.push(l),l};t.exports=a},function(t,e,n){var r=n(30),i=n(15),o=n(31),s=n(39),a={preEmit:1,shouldEmit:1},u=n(40);t.exports=function(t){function e(){var e,n=0;if(this.subscriptions=[],this.emitter=new r.EventEmitter,this.eventLabel="change",u(this,t),this.init&&r.isFunction(this.init)&&this.init(),this.listenables)for(e=[].concat(this.listenables);n<e.length;n++)this.listenToMany(e[n])}t=t||{};for(var n in i.StoreMethods)if(!a[n]&&(i.PublisherMethods[n]||i.ListenerMethods[n]))throw new Error("Cannot override API method "+n+" in Reflux.StoreMethods. Use another method name or override it on Reflux.PublisherMethods / Reflux.ListenerMethods instead.");for(var c in t)if(!a[c]&&(i.PublisherMethods[c]||i.ListenerMethods[c]))throw new Error("Cannot override API method "+c+" in store creation. Use another method name or override it on Reflux.PublisherMethods / Reflux.ListenerMethods instead.");t=s(t),r.extend(e.prototype,i.ListenerMethods,i.PublisherMethods,i.StoreMethods,t);var h=new e;return o.createdStores.push(h),h}},function(t,e,n){var r=n(15),i=n(30);t.exports=function(t,e){return{getInitialState:function(){return i.isFunction(t.getInitialState)?void 0===e?t.getInitialState():i.object([e],[t.getInitialState()]):{}},componentDidMount:function(){i.extend(this,r.ListenerMethods);var n=this,o=void 0===e?this.setState:function(t){n.setState(i.object([e],[t]))};this.listenTo(t,o)},componentWillUnmount:r.ListenerMixin.componentWillUnmount}}},function(t,e,n){var r=n(15),i=n(30);t.exports=function(t,e,n){return n=i.isFunction(e)?e:n,{getInitialState:function(){if(i.isFunction(t.getInitialState)){if(i.isFunction(e))return n.call(this,t.getInitialState());var r=n.call(this,t.getInitialState());return r?i.object([e],[r]):{}}return{}},componentDidMount:function(){i.extend(this,r.ListenerMethods);var o=this,s=function(t){if(i.isFunction(e))o.setState(n.call(o,t));else{var r=n.call(o,t);o.setState(i.object([e],[r]))}};this.listenTo(t,s)},componentWillUnmount:r.ListenerMixin.componentWillUnmount}}},function(t,e,n){var r=n(30),i=n(19);t.exports=r.extend({componentWillUnmount:i.stopListeningToAll},i)},function(t,e,n){var r=n(15);t.exports=function(t,e,n){return{componentDidMount:function(){for(var i in r.ListenerMethods)if(this[i]!==r.ListenerMethods[i]){if(this[i])throw"Can't have other property '"+i+"' when using Reflux.listenTo!";this[i]=r.ListenerMethods[i]}this.listenTo(t,e,n)},componentWillUnmount:r.ListenerMethods.stopListeningToAll}}},function(t,e,n){var r=n(15);t.exports=function(t){return{componentDidMount:function(){for(var e in r.ListenerMethods)if(this[e]!==r.ListenerMethods[e]){if(this[e])throw"Can't have other property '"+e+"' when using Reflux.listenToMany!";this[e]=r.ListenerMethods[e]}this.listenToMany(t)},componentWillUnmount:r.ListenerMethods.stopListeningToAll}}},function(t,e,n){function r(t,e,n){return function(){var r,i=n.subscriptions,o=i?i.indexOf(t):-1;for(u.throwIf(-1===o,"Tried to remove join already gone from subscriptions list!"),r=0;r<e.length;r++)e[r]();i.splice(o,1)}}function i(t){t.listenablesEmitted=new Array(t.numberOfListenables),t.args=new Array(t.numberOfListenables)}function o(t,e){return function(){var n=a.call(arguments);if(e.listenablesEmitted[t])switch(e.strategy){case"strict":throw new Error("Strict join failed because listener triggered twice.");case"last":e.args[t]=n;break;case"all":e.args[t].push(n)}else e.listenablesEmitted[t]=!0,e.args[t]="all"===e.strategy?[n]:n;s(e)}}function s(t){for(var e=0;e<t.numberOfListenables;e++)if(!t.listenablesEmitted[e])return;t.callback.apply(t.listener,t.args),i(t)}var a=Array.prototype.slice,u=n(30),c=n(23),h={strict:"joinStrict",first:"joinLeading",last:"joinTrailing",all:"joinConcat"};e.staticJoinCreator=function(t){return function(){var e=a.call(arguments);return c({init:function(){this[h[t]].apply(this,e.concat("triggerAsync"))}})}},e.instanceJoinCreator=function(t){return function(){u.throwIf(arguments.length<3,"Cannot create a join with less than 2 listenables!");var e,n,s=a.call(arguments),c=s.pop(),h=s.length,f={numberOfListenables:h,callback:this[c]||c,listener:this,strategy:t},l=[];for(e=0;h>e;e++)u.throwIf(this.validateListening(s[e]));for(e=0;h>e;e++)l.push(s[e].listen(o(e,f),this));return i(f),n={listenable:s},n.stop=r(n,l,this),this.subscriptions=(this.subscriptions||[]).concat(n),n}}},function(t,e,n){var r=e.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t};e.extend=function(t){if(!r(t))return t;for(var e,n,i=1,o=arguments.length;o>i;i++){e=arguments[i];for(n in e)if(Object.getOwnPropertyDescriptor&&Object.defineProperty){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,s)}else t[n]=e[n]}return t},e.isFunction=function(t){return"function"==typeof t},e.EventEmitter=n(47),e.nextTick=function(t){setTimeout(t,0)},e.capitalize=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},e.callbackName=function(t){return"on"+e.capitalize(t)},e.object=function(t,e){for(var n={},r=0;r<t.length;r++)n[t[r]]=e[r];return n},e.Promise=n(48),e.createPromise=function(t){return new e.Promise(t)},e.isArguments=function(t){return"object"==typeof t&&"callee"in t&&"number"==typeof t.length},e.throwIf=function(t,e){if(t)throw Error(e||t)}},function(t,e,n){e.createdStores=[],e.createdActions=[],e.reset=function(){for(;e.createdStores.length;)e.createdStores.pop();for(;e.createdActions.length;)e.createdActions.pop()}},function(t,e,n){(function(e){"use strict";function r(t,n){Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:function(){return this._store?this._store[n]:null},set:function(t){"production"!==e.env.NODE_ENV?u(!1,"Don't set the %s property of the React element. Instead, specify the correct value when initially creating the element.",n):null,this._store[n]=t}})}function i(t){try{var e={props:!0};for(var n in e)r(t,n);h=!0}catch(i){}}var o=n(41),s=n(42),a=n(43),u=n(35),c={key:!0,ref:!0},h=!1,f=function(t,n,r,i,o,s){if(this.type=t,this.key=n,this.ref=r,this._owner=i,this._context=o,"production"!==e.env.NODE_ENV){this._store={props:s,originalProps:a({},s)};try{Object.defineProperty(this._store,"validated",{configurable:!1,enumerable:!1,writable:!0})}catch(u){}if(this._store.validated=!1,h)return void Object.freeze(this)}this.props=s};f.prototype={_isReactElement:!0},"production"!==e.env.NODE_ENV&&i(f.prototype),f.createElement=function(t,e,n){var r,i={},a=null,u=null;if(null!=e){u=void 0===e.ref?null:e.ref,a=void 0===e.key?null:""+e.key;for(r in e)e.hasOwnProperty(r)&&!c.hasOwnProperty(r)&&(i[r]=e[r])}var h=arguments.length-2;if(1===h)i.children=n;else if(h>1){for(var l=Array(h),p=0;h>p;p++)l[p]=arguments[p+2];i.children=l}if(t&&t.defaultProps){var d=t.defaultProps;for(r in d)"undefined"==typeof i[r]&&(i[r]=d[r])}return new f(t,a,u,s.current,o.current,i)},f.createFactory=function(t){var e=f.createElement.bind(null,t);return e.type=t,e},f.cloneAndReplaceProps=function(t,n){var r=new f(t.type,t.key,t.ref,t._owner,t._context,n);return"production"!==e.env.NODE_ENV&&(r._store.validated=t._store.validated),r},f.cloneElement=function(t,e,n){var r,i=a({},t.props),o=t.key,u=t.ref,h=t._owner;if(null!=e){void 0!==e.ref&&(u=e.ref,h=s.current),void 0!==e.key&&(o=""+e.key);for(r in e)e.hasOwnProperty(r)&&!c.hasOwnProperty(r)&&(i[r]=e[r])}var l=arguments.length-2;if(1===l)i.children=n;else if(l>1){for(var p=Array(l),d=0;l>d;d++)p[d]=arguments[d+2];i.children=p}return new f(t.type,o,u,h,t._context,i)},f.isValidElement=function(t){var e=!(!t||!t._isReactElement);return e},t.exports=f}).call(e,n(38))},function(t,e,n){"use strict";function r(t){return function(e,n,r){e.hasOwnProperty(n)?e[n]=t(e[n],r):e[n]=r}}function i(t,e){for(var n in e)if(e.hasOwnProperty(n)){var r=c[n];r&&c.hasOwnProperty(n)?r(t,n,e[n]):t.hasOwnProperty(n)||(t[n]=e[n])}return t}var o=n(43),s=n(44),a=n(45),u=r(function(t,e){return o({},e,t)}),c={children:s,className:r(a),style:u},h={mergeProps:function(t,e){return i(o({},t),e)}};t.exports=h},function(t,e,n){var r=function(t){var e;for(e in t)if(t.hasOwnProperty(e))return e;return null};t.exports=r},function(t,e,n){(function(e){"use strict";var r=n(44),i=r;"production"!==e.env.NODE_ENV&&(i=function(t,e){for(var n=[],r=2,i=arguments.length;i>r;r++)n.push(arguments[r]);if(void 0===e)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(e.length<10||/^[s\W]*$/.test(e))throw new Error("The warning format should be able to uniquely identify this warning. Please, use a more descriptive format than: "+e);if(0!==e.indexOf("Failed Composite propType: ")&&!t){var o=0,s="Warning: "+e.replace(/%s/g,function(){return n[o++]});console.warn(s);try{throw new Error(s)}catch(a){}}}),t.exports=i}).call(e,n(38))},function(t,e,n){!function(e,n){t.exports=n()}(this,function(){"use strict";function t(t,e){e&&(t.prototype=Object.create(e.prototype)),t.prototype.constructor=t}function e(t){return t.value=!1,t}function n(t){t&&(t.value=!0)}function r(){}function i(t,e){e=e||0;for(var n=Math.max(0,t.length-e),r=new Array(n),i=0;n>i;i++)r[i]=t[i+e];return r}function o(t){return void 0===t.size&&(t.size=t.__iterate(a)),t.size}function s(t,e){return e>=0?+e:o(t)+ +e}function a(){return!0}function u(t,e,n){return(0===t||void 0!==n&&-n>=t)&&(void 0===e||void 0!==n&&e>=n)}function c(t,e){return f(t,e,0)}function h(t,e){return f(t,e,e)}function f(t,e,n){return void 0===t?n:0>t?Math.max(0,e+t):void 0===e?t:Math.min(e,t)}function l(t){return y(t)?t:D(t)}function p(t){return m(t)?t:A(t)}function d(t){return g(t)?t:T(t)}function v(t){return y(t)&&!_(t)?t:P(t)}function y(t){return!(!t||!t[vn])}function m(t){return!(!t||!t[yn])}function g(t){return!(!t||!t[mn])}function _(t){return m(t)||g(t)}function w(t){return!(!t||!t[gn])}function b(t){this.next=t}function x(t,e,n,r){var i=0===t?e:1===t?n:[e,n];return r?r.value=i:r={value:i,done:!1},r}function S(){return{value:void 0,done:!0}}function I(t){return!!E(t)}function k(t){return t&&"function"==typeof t.next}function O(t){var e=E(t);return e&&e.call(t)}function E(t){var e=t&&(xn&&t[xn]||t[Sn]);return"function"==typeof e?e:void 0}function j(t){return t&&"number"==typeof t.length}function D(t){return null===t||void 0===t?L():y(t)?t.toSeq():F(t)}function A(t){return null===t||void 0===t?L().toKeyedSeq():y(t)?m(t)?t.toSeq():t.fromEntrySeq():N(t)}function T(t){return null===t||void 0===t?L():y(t)?m(t)?t.entrySeq():t.toIndexedSeq():V(t)}function P(t){return(null===t||void 0===t?L():y(t)?m(t)?t.entrySeq():t:V(t)).toSetSeq()}function z(t){this._array=t,this.size=t.length}function M(t){var e=Object.keys(t);this._object=t,this._keys=e,this.size=e.length}function C(t){this._iterable=t,this.size=t.length||t.size}function q(t){this._iterator=t,this._iteratorCache=[]}function R(t){return!(!t||!t[kn])}function L(){return On||(On=new z([]))}function N(t){var e=Array.isArray(t)?new z(t).fromEntrySeq():k(t)?new q(t).fromEntrySeq():I(t)?new C(t).fromEntrySeq():"object"==typeof t?new M(t):void 0;if(!e)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+t);return e}function V(t){var e=U(t);if(!e)throw new TypeError("Expected Array or iterable object of values: "+t);return e}function F(t){var e=U(t)||"object"==typeof t&&new M(t);if(!e)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+t);return e}function U(t){return j(t)?new z(t):k(t)?new q(t):I(t)?new C(t):void 0}function $(t,e,n,r){var i=t._cache;if(i){for(var o=i.length-1,s=0;o>=s;s++){var a=i[n?o-s:s];if(e(a[1],r?a[0]:s,t)===!1)return s+1}return s}return t.__iterateUncached(e,n)}function B(t,e,n,r){var i=t._cache;if(i){var o=i.length-1,s=0;return new b(function(){var t=i[n?o-s:s];return s++>o?S():x(e,r?t[0]:s-1,t[1])})}return t.__iteratorUncached(e,n)}function W(){throw TypeError("Abstract")}function K(){}function J(){}function H(){}function X(t,e){if(t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1;if("function"==typeof t.valueOf&&"function"==typeof e.valueOf){if(t=t.valueOf(),e=e.valueOf(),t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1}return"function"==typeof t.equals&&"function"==typeof e.equals&&t.equals(e)?!0:!1}function G(t,e){return e?Q(e,t,"",{"":t}):Y(t)}function Q(t,e,n,r){return Array.isArray(e)?t.call(r,n,T(e).map(function(n,r){return Q(t,n,r,e)})):Z(e)?t.call(r,n,A(e).map(function(n,r){return Q(t,n,r,e)})):e}function Y(t){return Array.isArray(t)?T(t).map(Y).toList():Z(t)?A(t).map(Y).toMap():t}function Z(t){return t&&(t.constructor===Object||void 0===t.constructor)}function tt(t){return t>>>1&1073741824|3221225471&t}function et(t){if(t===!1||null===t||void 0===t)return 0;if("function"==typeof t.valueOf&&(t=t.valueOf(),t===!1||null===t||void 0===t))return 0;if(t===!0)return 1;var e=typeof t;if("number"===e){var n=0|t;for(n!==t&&(n^=4294967295*t);t>4294967295;)t/=4294967295,n^=t;return tt(n)}return"string"===e?t.length>Mn?nt(t):rt(t):"function"==typeof t.hashCode?t.hashCode():it(t)}function nt(t){var e=Rn[t];return void 0===e&&(e=rt(t),qn===Cn&&(qn=0,Rn={}),qn++,Rn[t]=e),e}function rt(t){for(var e=0,n=0;n<t.length;n++)e=31*e+t.charCodeAt(n)|0;return tt(e)}function it(t){var e;if(Tn&&(e=En.get(t),void 0!==e))return e;if(e=t[zn],void 0!==e)return e;if(!An){if(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[zn],void 0!==e)return e;if(e=ot(t),void 0!==e)return e}if(e=++Pn,1073741824&Pn&&(Pn=0),Tn)En.set(t,e);else{if(void 0!==Dn&&Dn(t)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(An)Object.defineProperty(t,zn,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[zn]=e;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[zn]=e}}return e}function ot(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}function st(t,e){if(!t)throw new Error(e)}function at(t){st(t!==1/0,"Cannot perform this action with an infinite size.")}function ut(t,e){this._iter=t,this._useKeys=e,this.size=t.size}function ct(t){this._iter=t,this.size=t.size}function ht(t){this._iter=t,this.size=t.size}function ft(t){this._iter=t,this.size=t.size}function lt(t){var e=zt(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var e=t.reverse.apply(this);return e.flip=function(){return t.reverse()},e},e.has=function(e){return t.includes(e)},e.includes=function(e){return t.has(e)},e.cacheResult=Mt,e.__iterateUncached=function(e,n){var r=this;return t.__iterate(function(t,n){return e(n,t,r)!==!1},n)},e.__iteratorUncached=function(e,n){if(e===bn){var r=t.__iterator(e,n);return new b(function(){var t=r.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t})}return t.__iterator(e===wn?_n:wn,n)},e}function pt(t,e,n){var r=zt(t);return r.size=t.size,r.has=function(e){return t.has(e)},r.get=function(r,i){var o=t.get(r,ln);return o===ln?i:e.call(n,o,r,t)},r.__iterateUncached=function(r,i){var o=this;return t.__iterate(function(t,i,s){return r(e.call(n,t,i,s),i,o)!==!1},i)},r.__iteratorUncached=function(r,i){var o=t.__iterator(bn,i);return new b(function(){var i=o.next();if(i.done)return i;var s=i.value,a=s[0];return x(r,a,e.call(n,s[1],a,t),i)})},r}function dt(t,e){var n=zt(t);return n._iter=t,n.size=t.size,n.reverse=function(){return t},t.flip&&(n.flip=function(){var e=lt(t);return e.reverse=function(){return t.flip()},e}),n.get=function(n,r){return t.get(e?n:-1-n,r)},n.has=function(n){return t.has(e?n:-1-n)},n.includes=function(e){return t.includes(e)},n.cacheResult=Mt,n.__iterate=function(e,n){var r=this;return t.__iterate(function(t,n){return e(t,n,r)},!n)},n.__iterator=function(e,n){return t.__iterator(e,!n)},n}function vt(t,e,n,r){var i=zt(t);return r&&(i.has=function(r){var i=t.get(r,ln);return i!==ln&&!!e.call(n,i,r,t)},i.get=function(r,i){var o=t.get(r,ln);return o!==ln&&e.call(n,o,r,t)?o:i}),i.__iterateUncached=function(i,o){var s=this,a=0;return t.__iterate(function(t,o,u){return e.call(n,t,o,u)?(a++,i(t,r?o:a-1,s)):void 0},o),a},i.__iteratorUncached=function(i,o){var s=t.__iterator(bn,o),a=0;return new b(function(){for(;;){var o=s.next();if(o.done)return o;var u=o.value,c=u[0],h=u[1];if(e.call(n,h,c,t))return x(i,r?c:a++,h,o)}})},i}function yt(t,e,n){var r=Rt().asMutable();return t.__iterate(function(i,o){r.update(e.call(n,i,o,t),0,function(t){return t+1})}),r.asImmutable()}function mt(t,e,n){var r=m(t),i=(w(t)?Se():Rt()).asMutable();t.__iterate(function(o,s){i.update(e.call(n,o,s,t),function(t){return t=t||[],t.push(r?[s,o]:o),t})});var o=Pt(t);return i.map(function(e){return Dt(t,o(e))})}function gt(t,e,n,r){var i=t.size;if(u(e,n,i))return t;var o=c(e,i),a=h(n,i);if(o!==o||a!==a)return gt(t.toSeq().cacheResult(),e,n,r);var f=a-o;0>f&&(f=0);var l=zt(t);return l.size=0===f?f:t.size&&f||void 0,!r&&R(t)&&f>=0&&(l.get=function(e,n){return e=s(this,e),e>=0&&f>e?t.get(e+o,n):n}),l.__iterateUncached=function(e,n){var i=this;if(0===f)return 0;if(n)return this.cacheResult().__iterate(e,n);var s=0,a=!0,u=0;return t.__iterate(function(t,n){return a&&(a=s++<o)?void 0:(u++,e(t,r?n:u-1,i)!==!1&&u!==f)}),u},l.__iteratorUncached=function(e,n){if(f&&n)return this.cacheResult().__iterator(e,n);var i=f&&t.__iterator(e,n),s=0,a=0;return new b(function(){for(;s++<o;)i.next();if(++a>f)return S();var t=i.next();return r||e===wn?t:e===_n?x(e,a-1,void 0,t):x(e,a-1,t.value[1],t)})},l}function _t(t,e,n){var r=zt(t);return r.__iterateUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterate(r,i);var s=0;return t.__iterate(function(t,i,a){return e.call(n,t,i,a)&&++s&&r(t,i,o)}),s},r.__iteratorUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterator(r,i);var s=t.__iterator(bn,i),a=!0;return new b(function(){if(!a)return S();var t=s.next();if(t.done)return t;var i=t.value,u=i[0],c=i[1];return e.call(n,c,u,o)?r===bn?t:x(r,u,c,t):(a=!1,S())})},r}function wt(t,e,n,r){var i=zt(t);return i.__iterateUncached=function(i,o){var s=this;if(o)return this.cacheResult().__iterate(i,o);var a=!0,u=0;return t.__iterate(function(t,o,c){return a&&(a=e.call(n,t,o,c))?void 0:(u++,i(t,r?o:u-1,s))}),u},i.__iteratorUncached=function(i,o){var s=this;if(o)return this.cacheResult().__iterator(i,o);var a=t.__iterator(bn,o),u=!0,c=0;return new b(function(){var t,o,h;do{if(t=a.next(),t.done)return r||i===wn?t:i===_n?x(i,c++,void 0,t):x(i,c++,t.value[1],t);var f=t.value;o=f[0],h=f[1],u&&(u=e.call(n,h,o,s))}while(u);return i===bn?t:x(i,o,h,t)})},i}function bt(t,e){var n=m(t),r=[t].concat(e).map(function(t){return y(t)?n&&(t=p(t)):t=n?N(t):V(Array.isArray(t)?t:[t]),t}).filter(function(t){return 0!==t.size});if(0===r.length)return t;if(1===r.length){var i=r[0];if(i===t||n&&m(i)||g(t)&&g(i))return i}var o=new z(r);return n?o=o.toKeyedSeq():g(t)||(o=o.toSetSeq()),o=o.flatten(!0),o.size=r.reduce(function(t,e){if(void 0!==t){var n=e.size;if(void 0!==n)return t+n}},0),o}function xt(t,e,n){var r=zt(t);return r.__iterateUncached=function(r,i){function o(t,u){var c=this;t.__iterate(function(t,i){return(!e||e>u)&&y(t)?o(t,u+1):r(t,n?i:s++,c)===!1&&(a=!0),!a},i)}var s=0,a=!1;return o(t,0),s},r.__iteratorUncached=function(r,i){var o=t.__iterator(r,i),s=[],a=0;return new b(function(){for(;o;){var t=o.next();if(t.done===!1){var u=t.value;if(r===bn&&(u=u[1]),e&&!(s.length<e)||!y(u))return n?t:x(r,a++,u,t);s.push(o),o=u.__iterator(r,i)}else o=s.pop()}return S()})},r}function St(t,e,n){var r=Pt(t);return t.toSeq().map(function(i,o){return r(e.call(n,i,o,t))}).flatten(!0)}function It(t,e){var n=zt(t);return n.size=t.size&&2*t.size-1,n.__iterateUncached=function(n,r){var i=this,o=0;return t.__iterate(function(t,r){return(!o||n(e,o++,i)!==!1)&&n(t,o++,i)!==!1},r),o},n.__iteratorUncached=function(n,r){var i,o=t.__iterator(wn,r),s=0;return new b(function(){return(!i||s%2)&&(i=o.next(),i.done)?i:s%2?x(n,s++,e):x(n,s++,i.value,i)})},n}function kt(t,e,n){e||(e=Ct);var r=m(t),i=0,o=t.toSeq().map(function(e,r){return[r,e,i++,n?n(e,r,t):e]}).toArray();return o.sort(function(t,n){return e(t[3],n[3])||t[2]-n[2]}).forEach(r?function(t,e){o[e].length=2}:function(t,e){o[e]=t[1]}),r?A(o):g(t)?T(o):P(o)}function Ot(t,e,n){if(e||(e=Ct),n){var r=t.toSeq().map(function(e,r){return[e,n(e,r,t)]}).reduce(function(t,n){return Et(e,t[1],n[1])?n:t});return r&&r[0]}return t.reduce(function(t,n){return Et(e,t,n)?n:t})}function Et(t,e,n){var r=t(n,e);return 0===r&&n!==e&&(void 0===n||null===n||n!==n)||r>0}function jt(t,e,n){var r=zt(t);return r.size=new z(n).map(function(t){return t.size}).min(),r.__iterate=function(t,e){for(var n,r=this.__iterator(wn,e),i=0;!(n=r.next()).done&&t(n.value,i++,this)!==!1;);return i},r.__iteratorUncached=function(t,r){var i=n.map(function(t){return t=l(t),O(r?t.reverse():t)}),o=0,s=!1;return new b(function(){var n;return s||(n=i.map(function(t){return t.next()}),s=n.some(function(t){return t.done})),s?S():x(t,o++,e.apply(null,n.map(function(t){return t.value})))})},r}function Dt(t,e){return R(t)?e:t.constructor(e)}function At(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function Tt(t){return at(t.size),o(t)}function Pt(t){return m(t)?p:g(t)?d:v}function zt(t){return Object.create((m(t)?A:g(t)?T:P).prototype)}function Mt(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):D.prototype.cacheResult.call(this)}function Ct(t,e){return t>e?1:e>t?-1:0}function qt(t){var e=O(t);if(!e){if(!j(t))throw new TypeError("Expected iterable or array-like: "+t);e=O(l(t))}return e}function Rt(t){return null===t||void 0===t?Ht():Lt(t)?t:Ht().withMutations(function(e){var n=p(t);at(n.size),n.forEach(function(t,n){return e.set(n,t)})})}function Lt(t){return!(!t||!t[Ln])}function Nt(t,e){this.ownerID=t,this.entries=e}function Vt(t,e,n){this.ownerID=t,this.bitmap=e,this.nodes=n}function Ft(t,e,n){this.ownerID=t,this.count=e,this.nodes=n}function Ut(t,e,n){this.ownerID=t,this.keyHash=e,this.entries=n}function $t(t,e,n){this.ownerID=t,this.keyHash=e,this.entry=n}function Bt(t,e,n){this._type=e,this._reverse=n,this._stack=t._root&&Kt(t._root)}function Wt(t,e){return x(t,e[0],e[1])}function Kt(t,e){return{node:t,index:0,__prev:e}}function Jt(t,e,n,r){var i=Object.create(Nn);return i.size=t,i._root=e,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function Ht(){return Vn||(Vn=Jt(0))}function Xt(t,n,r){var i,o;if(t._root){var s=e(pn),a=e(dn);if(i=Gt(t._root,t.__ownerID,0,void 0,n,r,s,a),!a.value)return t;o=t.size+(s.value?r===ln?-1:1:0)}else{if(r===ln)return t;o=1,i=new Nt(t.__ownerID,[[n,r]])}return t.__ownerID?(t.size=o,t._root=i,t.__hash=void 0,t.__altered=!0,t):i?Jt(o,i):Ht()}function Gt(t,e,r,i,o,s,a,u){return t?t.update(e,r,i,o,s,a,u):s===ln?t:(n(u),n(a),new $t(e,i,[o,s]))}function Qt(t){return t.constructor===$t||t.constructor===Ut}function Yt(t,e,n,r,i){if(t.keyHash===r)return new Ut(e,r,[t.entry,i]);var o,s=(0===n?t.keyHash:t.keyHash>>>n)&fn,a=(0===n?r:r>>>n)&fn,u=s===a?[Yt(t,e,n+cn,r,i)]:(o=new $t(e,r,i),a>s?[t,o]:[o,t]);return new Vt(e,1<<s|1<<a,u)}function Zt(t,e,n,i){t||(t=new r);for(var o=new $t(t,et(n),[n,i]),s=0;s<e.length;s++){var a=e[s];o=o.update(t,0,void 0,a[0],a[1])}return o}function te(t,e,n,r){for(var i=0,o=0,s=new Array(n),a=0,u=1,c=e.length;c>a;a++,u<<=1){var h=e[a];void 0!==h&&a!==r&&(i|=u,s[o++]=h)}return new Vt(t,i,s)}function ee(t,e,n,r,i){for(var o=0,s=new Array(hn),a=0;0!==n;a++,n>>>=1)s[a]=1&n?e[o++]:void 0;return s[r]=i,new Ft(t,o+1,s)}function ne(t,e,n){for(var r=[],i=0;i<n.length;i++){var o=n[i],s=p(o);y(o)||(s=s.map(function(t){return G(t)})),r.push(s)}return ie(t,e,r)}function re(t){return function(e,n,r){return e&&e.mergeDeepWith&&y(n)?e.mergeDeepWith(t,n):t?t(e,n,r):n}}function ie(t,e,n){return n=n.filter(function(t){return 0!==t.size}),0===n.length?t:0!==t.size||t.__ownerID||1!==n.length?t.withMutations(function(t){for(var r=e?function(n,r){t.update(r,ln,function(t){return t===ln?n:e(t,n,r)})}:function(e,n){t.set(n,e)},i=0;i<n.length;i++)n[i].forEach(r)}):t.constructor(n[0])}function oe(t,e,n,r){var i=t===ln,o=e.next();if(o.done){var s=i?n:t,a=r(s);return a===s?t:a}st(i||t&&t.set,"invalid keyPath");var u=o.value,c=i?ln:t.get(u,ln),h=oe(c,e,n,r);return h===c?t:h===ln?t.remove(u):(i?Ht():t).set(u,h)}function se(t){return t-=t>>1&1431655765,t=(858993459&t)+(t>>2&858993459),t=t+(t>>4)&252645135,t+=t>>8,t+=t>>16,127&t}function ae(t,e,n,r){var o=r?t:i(t);return o[e]=n,o}function ue(t,e,n,r){var i=t.length+1;if(r&&e+1===i)return t[e]=n,t;for(var o=new Array(i),s=0,a=0;i>a;a++)a===e?(o[a]=n,s=-1):o[a]=t[a+s];return o}function ce(t,e,n){var r=t.length-1;if(n&&e===r)return t.pop(),t;for(var i=new Array(r),o=0,s=0;r>s;s++)s===e&&(o=1),i[s]=t[s+o];return i}function he(t){var e=ve();if(null===t||void 0===t)return e;if(fe(t))return t;var n=d(t),r=n.size;return 0===r?e:(at(r),r>0&&hn>r?de(0,r,cn,null,new le(n.toArray())):e.withMutations(function(t){t.setSize(r),n.forEach(function(e,n){return t.set(n,e)})}))}function fe(t){return!(!t||!t[Bn])}function le(t,e){this.array=t,this.ownerID=e}function pe(t,e){function n(t,e,n){return 0===e?r(t,n):i(t,e,n)}function r(t,n){var r=n===a?u&&u.array:t&&t.array,i=n>o?0:o-n,c=s-n;return c>hn&&(c=hn),function(){if(i===c)return Jn;var t=e?--c:i++;return r&&r[t]}}function i(t,r,i){var a,u=t&&t.array,c=i>o?0:o-i>>r,h=(s-i>>r)+1;return h>hn&&(h=hn),function(){for(;;){if(a){var t=a();if(t!==Jn)return t;a=null}if(c===h)return Jn;var o=e?--h:c++;a=n(u&&u[o],r-cn,i+(o<<r))}}}var o=t._origin,s=t._capacity,a=xe(s),u=t._tail;return n(t._root,t._level,0)}function de(t,e,n,r,i,o,s){var a=Object.create(Wn);return a.size=e-t,a._origin=t,a._capacity=e,a._level=n,a._root=r,a._tail=i,a.__ownerID=o,a.__hash=s,a.__altered=!1,a}function ve(){return Kn||(Kn=de(0,0,cn))}function ye(t,n,r){if(n=s(t,n),n>=t.size||0>n)return t.withMutations(function(t){0>n?we(t,n).set(0,r):we(t,0,n+1).set(n,r)});n+=t._origin;var i=t._tail,o=t._root,a=e(dn);return n>=xe(t._capacity)?i=me(i,t.__ownerID,0,n,r,a):o=me(o,t.__ownerID,t._level,n,r,a),a.value?t.__ownerID?(t._root=o,t._tail=i,t.__hash=void 0,t.__altered=!0,t):de(t._origin,t._capacity,t._level,o,i):t}function me(t,e,r,i,o,s){var a=i>>>r&fn,u=t&&a<t.array.length;if(!u&&void 0===o)return t;var c;if(r>0){var h=t&&t.array[a],f=me(h,e,r-cn,i,o,s);return f===h?t:(c=ge(t,e),c.array[a]=f,c)}return u&&t.array[a]===o?t:(n(s),
c=ge(t,e),void 0===o&&a===c.array.length-1?c.array.pop():c.array[a]=o,c)}function ge(t,e){return e&&t&&e===t.ownerID?t:new le(t?t.array.slice():[],e)}function _e(t,e){if(e>=xe(t._capacity))return t._tail;if(e<1<<t._level+cn){for(var n=t._root,r=t._level;n&&r>0;)n=n.array[e>>>r&fn],r-=cn;return n}}function we(t,e,n){var i=t.__ownerID||new r,o=t._origin,s=t._capacity,a=o+e,u=void 0===n?s:0>n?s+n:o+n;if(a===o&&u===s)return t;if(a>=u)return t.clear();for(var c=t._level,h=t._root,f=0;0>a+f;)h=new le(h&&h.array.length?[void 0,h]:[],i),c+=cn,f+=1<<c;f&&(a+=f,o+=f,u+=f,s+=f);for(var l=xe(s),p=xe(u);p>=1<<c+cn;)h=new le(h&&h.array.length?[h]:[],i),c+=cn;var d=t._tail,v=l>p?_e(t,u-1):p>l?new le([],i):d;if(d&&p>l&&s>a&&d.array.length){h=ge(h,i);for(var y=h,m=c;m>cn;m-=cn){var g=l>>>m&fn;y=y.array[g]=ge(y.array[g],i)}y.array[l>>>cn&fn]=d}if(s>u&&(v=v&&v.removeAfter(i,0,u)),a>=p)a-=p,u-=p,c=cn,h=null,v=v&&v.removeBefore(i,0,a);else if(a>o||l>p){for(f=0;h;){var _=a>>>c&fn;if(_!==p>>>c&fn)break;_&&(f+=(1<<c)*_),c-=cn,h=h.array[_]}h&&a>o&&(h=h.removeBefore(i,c,a-f)),h&&l>p&&(h=h.removeAfter(i,c,p-f)),f&&(a-=f,u-=f)}return t.__ownerID?(t.size=u-a,t._origin=a,t._capacity=u,t._level=c,t._root=h,t._tail=v,t.__hash=void 0,t.__altered=!0,t):de(a,u,c,h,v)}function be(t,e,n){for(var r=[],i=0,o=0;o<n.length;o++){var s=n[o],a=d(s);a.size>i&&(i=a.size),y(s)||(a=a.map(function(t){return G(t)})),r.push(a)}return i>t.size&&(t=t.setSize(i)),ie(t,e,r)}function xe(t){return hn>t?0:t-1>>>cn<<cn}function Se(t){return null===t||void 0===t?Oe():Ie(t)?t:Oe().withMutations(function(e){var n=p(t);at(n.size),n.forEach(function(t,n){return e.set(n,t)})})}function Ie(t){return Lt(t)&&w(t)}function ke(t,e,n,r){var i=Object.create(Se.prototype);return i.size=t?t.size:0,i._map=t,i._list=e,i.__ownerID=n,i.__hash=r,i}function Oe(){return Hn||(Hn=ke(Ht(),ve()))}function Ee(t,e,n){var r,i,o=t._map,s=t._list,a=o.get(e),u=void 0!==a;if(n===ln){if(!u)return t;s.size>=hn&&s.size>=2*o.size?(i=s.filter(function(t,e){return void 0!==t&&a!==e}),r=i.toKeyedSeq().map(function(t){return t[0]}).flip().toMap(),t.__ownerID&&(r.__ownerID=i.__ownerID=t.__ownerID)):(r=o.remove(e),i=a===s.size-1?s.pop():s.set(a,void 0))}else if(u){if(n===s.get(a)[1])return t;r=o,i=s.set(a,[e,n])}else r=o.set(e,s.size),i=s.set(s.size,[e,n]);return t.__ownerID?(t.size=r.size,t._map=r,t._list=i,t.__hash=void 0,t):ke(r,i)}function je(t){return null===t||void 0===t?Te():De(t)?t:Te().unshiftAll(t)}function De(t){return!(!t||!t[Xn])}function Ae(t,e,n,r){var i=Object.create(Gn);return i.size=t,i._head=e,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function Te(){return Qn||(Qn=Ae(0))}function Pe(t){return null===t||void 0===t?qe():ze(t)?t:qe().withMutations(function(e){var n=v(t);at(n.size),n.forEach(function(t){return e.add(t)})})}function ze(t){return!(!t||!t[Yn])}function Me(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function Ce(t,e){var n=Object.create(Zn);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function qe(){return tr||(tr=Ce(Ht()))}function Re(t){return null===t||void 0===t?Ve():Le(t)?t:Ve().withMutations(function(e){var n=v(t);at(n.size),n.forEach(function(t){return e.add(t)})})}function Le(t){return ze(t)&&w(t)}function Ne(t,e){var n=Object.create(er);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function Ve(){return nr||(nr=Ne(Oe()))}function Fe(t,e){var n,r=function(o){if(o instanceof r)return o;if(!(this instanceof r))return new r(o);if(!n){n=!0;var s=Object.keys(t);Be(i,s),i.size=s.length,i._name=e,i._keys=s,i._defaultValues=t}this._map=Rt(o)},i=r.prototype=Object.create(rr);return i.constructor=r,r}function Ue(t,e,n){var r=Object.create(Object.getPrototypeOf(t));return r._map=e,r.__ownerID=n,r}function $e(t){return t._name||t.constructor.name||"Record"}function Be(t,e){try{e.forEach(We.bind(void 0,t))}catch(n){}}function We(t,e){Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(t){st(this.__ownerID,"Cannot set on an immutable record."),this.set(e,t)}})}function Ke(t,e){if(t===e)return!0;if(!y(e)||void 0!==t.size&&void 0!==e.size&&t.size!==e.size||void 0!==t.__hash&&void 0!==e.__hash&&t.__hash!==e.__hash||m(t)!==m(e)||g(t)!==g(e)||w(t)!==w(e))return!1;if(0===t.size&&0===e.size)return!0;var n=!_(t);if(w(t)){var r=t.entries();return e.every(function(t,e){var i=r.next().value;return i&&X(i[1],t)&&(n||X(i[0],e))})&&r.next().done}var i=!1;if(void 0===t.size)if(void 0===e.size)"function"==typeof t.cacheResult&&t.cacheResult();else{i=!0;var o=t;t=e,e=o}var s=!0,a=e.__iterate(function(e,r){return(n?t.has(e):i?X(e,t.get(r,ln)):X(t.get(r,ln),e))?void 0:(s=!1,!1)});return s&&t.size===a}function Je(t,e,n){if(!(this instanceof Je))return new Je(t,e,n);if(st(0!==n,"Cannot step a Range by 0"),t=t||0,void 0===e&&(e=1/0),n=void 0===n?1:Math.abs(n),t>e&&(n=-n),this._start=t,this._end=e,this._step=n,this.size=Math.max(0,Math.ceil((e-t)/n-1)+1),0===this.size){if(ir)return ir;ir=this}}function He(t,e){if(!(this instanceof He))return new He(t,e);if(this._value=t,this.size=void 0===e?1/0:Math.max(0,e),0===this.size){if(or)return or;or=this}}function Xe(t,e){var n=function(n){t.prototype[n]=e[n]};return Object.keys(e).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(n),t}function Ge(t,e){return e}function Qe(t,e){return[e,t]}function Ye(t){return function(){return!t.apply(this,arguments)}}function Ze(t){return function(){return-t.apply(this,arguments)}}function tn(t){return"string"==typeof t?JSON.stringify(t):t}function en(){return i(arguments)}function nn(t,e){return e>t?1:t>e?-1:0}function rn(t){if(t.size===1/0)return 0;var e=w(t),n=m(t),r=e?1:0,i=t.__iterate(n?e?function(t,e){r=31*r+sn(et(t),et(e))|0}:function(t,e){r=r+sn(et(t),et(e))|0}:e?function(t){r=31*r+et(t)|0}:function(t){r=r+et(t)|0});return on(i,r)}function on(t,e){return e=jn(e,3432918353),e=jn(e<<15|e>>>-15,461845907),e=jn(e<<13|e>>>-13,5),e=(e+3864292196|0)^t,e=jn(e^e>>>16,2246822507),e=jn(e^e>>>13,3266489909),e=tt(e^e>>>16)}function sn(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}var an=Array.prototype.slice,un="delete",cn=5,hn=1<<cn,fn=hn-1,ln={},pn={value:!1},dn={value:!1};t(p,l),t(d,l),t(v,l),l.isIterable=y,l.isKeyed=m,l.isIndexed=g,l.isAssociative=_,l.isOrdered=w,l.Keyed=p,l.Indexed=d,l.Set=v;var vn="@@__IMMUTABLE_ITERABLE__@@",yn="@@__IMMUTABLE_KEYED__@@",mn="@@__IMMUTABLE_INDEXED__@@",gn="@@__IMMUTABLE_ORDERED__@@",_n=0,wn=1,bn=2,xn="function"==typeof Symbol&&Symbol.iterator,Sn="@@iterator",In=xn||Sn;b.prototype.toString=function(){return"[Iterator]"},b.KEYS=_n,b.VALUES=wn,b.ENTRIES=bn,b.prototype.inspect=b.prototype.toSource=function(){return this.toString()},b.prototype[In]=function(){return this},t(D,l),D.of=function(){return D(arguments)},D.prototype.toSeq=function(){return this},D.prototype.toString=function(){return this.__toString("Seq {","}")},D.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},D.prototype.__iterate=function(t,e){return $(this,t,e,!0)},D.prototype.__iterator=function(t,e){return B(this,t,e,!0)},t(A,D),A.prototype.toKeyedSeq=function(){return this},t(T,D),T.of=function(){return T(arguments)},T.prototype.toIndexedSeq=function(){return this},T.prototype.toString=function(){return this.__toString("Seq [","]")},T.prototype.__iterate=function(t,e){return $(this,t,e,!1)},T.prototype.__iterator=function(t,e){return B(this,t,e,!1)},t(P,D),P.of=function(){return P(arguments)},P.prototype.toSetSeq=function(){return this},D.isSeq=R,D.Keyed=A,D.Set=P,D.Indexed=T;var kn="@@__IMMUTABLE_SEQ__@@";D.prototype[kn]=!0,t(z,T),z.prototype.get=function(t,e){return this.has(t)?this._array[s(this,t)]:e},z.prototype.__iterate=function(t,e){for(var n=this._array,r=n.length-1,i=0;r>=i;i++)if(t(n[e?r-i:i],i,this)===!1)return i+1;return i},z.prototype.__iterator=function(t,e){var n=this._array,r=n.length-1,i=0;return new b(function(){return i>r?S():x(t,i,n[e?r-i++:i++])})},t(M,A),M.prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},M.prototype.has=function(t){return this._object.hasOwnProperty(t)},M.prototype.__iterate=function(t,e){for(var n=this._object,r=this._keys,i=r.length-1,o=0;i>=o;o++){var s=r[e?i-o:o];if(t(n[s],s,this)===!1)return o+1}return o},M.prototype.__iterator=function(t,e){var n=this._object,r=this._keys,i=r.length-1,o=0;return new b(function(){var s=r[e?i-o:o];return o++>i?S():x(t,s,n[s])})},M.prototype[gn]=!0,t(C,T),C.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var n=this._iterable,r=O(n),i=0;if(k(r))for(var o;!(o=r.next()).done&&t(o.value,i++,this)!==!1;);return i},C.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var n=this._iterable,r=O(n);if(!k(r))return new b(S);var i=0;return new b(function(){var e=r.next();return e.done?e:x(t,i++,e.value)})},t(q,T),q.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);for(var n=this._iterator,r=this._iteratorCache,i=0;i<r.length;)if(t(r[i],i++,this)===!1)return i;for(var o;!(o=n.next()).done;){var s=o.value;if(r[i]=s,t(s,i++,this)===!1)break}return i},q.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var n=this._iterator,r=this._iteratorCache,i=0;return new b(function(){if(i>=r.length){var e=n.next();if(e.done)return e;r[i]=e.value}return x(t,i,r[i++])})};var On;t(W,l),t(K,W),t(J,W),t(H,W),W.Keyed=K,W.Indexed=J,W.Set=H;var En,jn="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,e){t=0|t,e=0|e;var n=65535&t,r=65535&e;return n*r+((t>>>16)*r+n*(e>>>16)<<16>>>0)|0},Dn=Object.isExtensible,An=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}(),Tn="function"==typeof WeakMap;Tn&&(En=new WeakMap);var Pn=0,zn="__immutablehash__";"function"==typeof Symbol&&(zn=Symbol(zn));var Mn=16,Cn=255,qn=0,Rn={};t(ut,A),ut.prototype.get=function(t,e){return this._iter.get(t,e)},ut.prototype.has=function(t){return this._iter.has(t)},ut.prototype.valueSeq=function(){return this._iter.valueSeq()},ut.prototype.reverse=function(){var t=this,e=dt(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},ut.prototype.map=function(t,e){var n=this,r=pt(this,t,e);return this._useKeys||(r.valueSeq=function(){return n._iter.toSeq().map(t,e)}),r},ut.prototype.__iterate=function(t,e){var n,r=this;return this._iter.__iterate(this._useKeys?function(e,n){return t(e,n,r)}:(n=e?Tt(this):0,function(i){return t(i,e?--n:n++,r)}),e)},ut.prototype.__iterator=function(t,e){if(this._useKeys)return this._iter.__iterator(t,e);var n=this._iter.__iterator(wn,e),r=e?Tt(this):0;return new b(function(){var i=n.next();return i.done?i:x(t,e?--r:r++,i.value,i)})},ut.prototype[gn]=!0,t(ct,T),ct.prototype.includes=function(t){return this._iter.includes(t)},ct.prototype.__iterate=function(t,e){var n=this,r=0;return this._iter.__iterate(function(e){return t(e,r++,n)},e)},ct.prototype.__iterator=function(t,e){var n=this._iter.__iterator(wn,e),r=0;return new b(function(){var e=n.next();return e.done?e:x(t,r++,e.value,e)})},t(ht,P),ht.prototype.has=function(t){return this._iter.includes(t)},ht.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate(function(e){return t(e,e,n)},e)},ht.prototype.__iterator=function(t,e){var n=this._iter.__iterator(wn,e);return new b(function(){var e=n.next();return e.done?e:x(t,e.value,e.value,e)})},t(ft,A),ft.prototype.entrySeq=function(){return this._iter.toSeq()},ft.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate(function(e){if(e){At(e);var r=y(e);return t(r?e.get(1):e[1],r?e.get(0):e[0],n)}},e)},ft.prototype.__iterator=function(t,e){var n=this._iter.__iterator(wn,e);return new b(function(){for(;;){var e=n.next();if(e.done)return e;var r=e.value;if(r){At(r);var i=y(r);return x(t,i?r.get(0):r[0],i?r.get(1):r[1],e)}}})},ct.prototype.cacheResult=ut.prototype.cacheResult=ht.prototype.cacheResult=ft.prototype.cacheResult=Mt,t(Rt,K),Rt.prototype.toString=function(){return this.__toString("Map {","}")},Rt.prototype.get=function(t,e){return this._root?this._root.get(0,void 0,t,e):e},Rt.prototype.set=function(t,e){return Xt(this,t,e)},Rt.prototype.setIn=function(t,e){return this.updateIn(t,ln,function(){return e})},Rt.prototype.remove=function(t){return Xt(this,t,ln)},Rt.prototype.deleteIn=function(t){return this.updateIn(t,function(){return ln})},Rt.prototype.update=function(t,e,n){return 1===arguments.length?t(this):this.updateIn([t],e,n)},Rt.prototype.updateIn=function(t,e,n){n||(n=e,e=void 0);var r=oe(this,qt(t),e,n);return r===ln?void 0:r},Rt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Ht()},Rt.prototype.merge=function(){return ne(this,void 0,arguments)},Rt.prototype.mergeWith=function(t){var e=an.call(arguments,1);return ne(this,t,e)},Rt.prototype.mergeIn=function(t){var e=an.call(arguments,1);return this.updateIn(t,Ht(),function(t){return t.merge.apply(t,e)})},Rt.prototype.mergeDeep=function(){return ne(this,re(void 0),arguments)},Rt.prototype.mergeDeepWith=function(t){var e=an.call(arguments,1);return ne(this,re(t),e)},Rt.prototype.mergeDeepIn=function(t){var e=an.call(arguments,1);return this.updateIn(t,Ht(),function(t){return t.mergeDeep.apply(t,e)})},Rt.prototype.sort=function(t){return Se(kt(this,t))},Rt.prototype.sortBy=function(t,e){return Se(kt(this,e,t))},Rt.prototype.withMutations=function(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this},Rt.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new r)},Rt.prototype.asImmutable=function(){return this.__ensureOwner()},Rt.prototype.wasAltered=function(){return this.__altered},Rt.prototype.__iterator=function(t,e){return new Bt(this,t,e)},Rt.prototype.__iterate=function(t,e){var n=this,r=0;return this._root&&this._root.iterate(function(e){return r++,t(e[1],e[0],n)},e),r},Rt.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Jt(this.size,this._root,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},Rt.isMap=Lt;var Ln="@@__IMMUTABLE_MAP__@@",Nn=Rt.prototype;Nn[Ln]=!0,Nn[un]=Nn.remove,Nn.removeIn=Nn.deleteIn,Nt.prototype.get=function(t,e,n,r){for(var i=this.entries,o=0,s=i.length;s>o;o++)if(X(n,i[o][0]))return i[o][1];return r},Nt.prototype.update=function(t,e,r,o,s,a,u){for(var c=s===ln,h=this.entries,f=0,l=h.length;l>f&&!X(o,h[f][0]);f++);var p=l>f;if(p?h[f][1]===s:c)return this;if(n(u),(c||!p)&&n(a),!c||1!==h.length){if(!p&&!c&&h.length>=Fn)return Zt(t,h,o,s);var d=t&&t===this.ownerID,v=d?h:i(h);return p?c?f===l-1?v.pop():v[f]=v.pop():v[f]=[o,s]:v.push([o,s]),d?(this.entries=v,this):new Nt(t,v)}},Vt.prototype.get=function(t,e,n,r){void 0===e&&(e=et(n));var i=1<<((0===t?e:e>>>t)&fn),o=this.bitmap;return 0===(o&i)?r:this.nodes[se(o&i-1)].get(t+cn,e,n,r)},Vt.prototype.update=function(t,e,n,r,i,o,s){void 0===n&&(n=et(r));var a=(0===e?n:n>>>e)&fn,u=1<<a,c=this.bitmap,h=0!==(c&u);if(!h&&i===ln)return this;var f=se(c&u-1),l=this.nodes,p=h?l[f]:void 0,d=Gt(p,t,e+cn,n,r,i,o,s);if(d===p)return this;if(!h&&d&&l.length>=Un)return ee(t,l,c,a,d);if(h&&!d&&2===l.length&&Qt(l[1^f]))return l[1^f];if(h&&d&&1===l.length&&Qt(d))return d;var v=t&&t===this.ownerID,y=h?d?c:c^u:c|u,m=h?d?ae(l,f,d,v):ce(l,f,v):ue(l,f,d,v);return v?(this.bitmap=y,this.nodes=m,this):new Vt(t,y,m)},Ft.prototype.get=function(t,e,n,r){void 0===e&&(e=et(n));var i=(0===t?e:e>>>t)&fn,o=this.nodes[i];return o?o.get(t+cn,e,n,r):r},Ft.prototype.update=function(t,e,n,r,i,o,s){void 0===n&&(n=et(r));var a=(0===e?n:n>>>e)&fn,u=i===ln,c=this.nodes,h=c[a];if(u&&!h)return this;var f=Gt(h,t,e+cn,n,r,i,o,s);if(f===h)return this;var l=this.count;if(h){if(!f&&(l--,$n>l))return te(t,c,l,a)}else l++;var p=t&&t===this.ownerID,d=ae(c,a,f,p);return p?(this.count=l,this.nodes=d,this):new Ft(t,l,d)},Ut.prototype.get=function(t,e,n,r){for(var i=this.entries,o=0,s=i.length;s>o;o++)if(X(n,i[o][0]))return i[o][1];return r},Ut.prototype.update=function(t,e,r,o,s,a,u){void 0===r&&(r=et(o));var c=s===ln;if(r!==this.keyHash)return c?this:(n(u),n(a),Yt(this,t,e,r,[o,s]));for(var h=this.entries,f=0,l=h.length;l>f&&!X(o,h[f][0]);f++);var p=l>f;if(p?h[f][1]===s:c)return this;if(n(u),(c||!p)&&n(a),c&&2===l)return new $t(t,this.keyHash,h[1^f]);var d=t&&t===this.ownerID,v=d?h:i(h);return p?c?f===l-1?v.pop():v[f]=v.pop():v[f]=[o,s]:v.push([o,s]),d?(this.entries=v,this):new Ut(t,this.keyHash,v)},$t.prototype.get=function(t,e,n,r){return X(n,this.entry[0])?this.entry[1]:r},$t.prototype.update=function(t,e,r,i,o,s,a){var u=o===ln,c=X(i,this.entry[0]);return(c?o===this.entry[1]:u)?this:(n(a),u?void n(s):c?t&&t===this.ownerID?(this.entry[1]=o,this):new $t(t,this.keyHash,[i,o]):(n(s),Yt(this,t,e,et(i),[i,o])))},Nt.prototype.iterate=Ut.prototype.iterate=function(t,e){for(var n=this.entries,r=0,i=n.length-1;i>=r;r++)if(t(n[e?i-r:r])===!1)return!1},Vt.prototype.iterate=Ft.prototype.iterate=function(t,e){for(var n=this.nodes,r=0,i=n.length-1;i>=r;r++){var o=n[e?i-r:r];if(o&&o.iterate(t,e)===!1)return!1}},$t.prototype.iterate=function(t,e){return t(this.entry)},t(Bt,b),Bt.prototype.next=function(){for(var t=this._type,e=this._stack;e;){var n,r=e.node,i=e.index++;if(r.entry){if(0===i)return Wt(t,r.entry)}else if(r.entries){if(n=r.entries.length-1,n>=i)return Wt(t,r.entries[this._reverse?n-i:i])}else if(n=r.nodes.length-1,n>=i){var o=r.nodes[this._reverse?n-i:i];if(o){if(o.entry)return Wt(t,o.entry);e=this._stack=Kt(o,e)}continue}e=this._stack=this._stack.__prev}return S()};var Vn,Fn=hn/4,Un=hn/2,$n=hn/4;t(he,J),he.of=function(){return this(arguments)},he.prototype.toString=function(){return this.__toString("List [","]")},he.prototype.get=function(t,e){if(t=s(this,t),0>t||t>=this.size)return e;t+=this._origin;var n=_e(this,t);return n&&n.array[t&fn]},he.prototype.set=function(t,e){return ye(this,t,e)},he.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},he.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=cn,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):ve()},he.prototype.push=function(){var t=arguments,e=this.size;return this.withMutations(function(n){we(n,0,e+t.length);for(var r=0;r<t.length;r++)n.set(e+r,t[r])})},he.prototype.pop=function(){return we(this,0,-1)},he.prototype.unshift=function(){var t=arguments;return this.withMutations(function(e){we(e,-t.length);for(var n=0;n<t.length;n++)e.set(n,t[n])})},he.prototype.shift=function(){return we(this,1)},he.prototype.merge=function(){return be(this,void 0,arguments)},he.prototype.mergeWith=function(t){var e=an.call(arguments,1);return be(this,t,e)},he.prototype.mergeDeep=function(){return be(this,re(void 0),arguments)},he.prototype.mergeDeepWith=function(t){var e=an.call(arguments,1);return be(this,re(t),e)},he.prototype.setSize=function(t){return we(this,0,t)},he.prototype.slice=function(t,e){var n=this.size;return u(t,e,n)?this:we(this,c(t,n),h(e,n))},he.prototype.__iterator=function(t,e){var n=0,r=pe(this,e);return new b(function(){var e=r();return e===Jn?S():x(t,n++,e)})},he.prototype.__iterate=function(t,e){for(var n,r=0,i=pe(this,e);(n=i())!==Jn&&t(n,r++,this)!==!1;);return r},he.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?de(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):(this.__ownerID=t,this)},he.isList=fe;var Bn="@@__IMMUTABLE_LIST__@@",Wn=he.prototype;Wn[Bn]=!0,Wn[un]=Wn.remove,Wn.setIn=Nn.setIn,Wn.deleteIn=Wn.removeIn=Nn.removeIn,Wn.update=Nn.update,Wn.updateIn=Nn.updateIn,Wn.mergeIn=Nn.mergeIn,Wn.mergeDeepIn=Nn.mergeDeepIn,Wn.withMutations=Nn.withMutations,Wn.asMutable=Nn.asMutable,Wn.asImmutable=Nn.asImmutable,Wn.wasAltered=Nn.wasAltered,le.prototype.removeBefore=function(t,e,n){if(n===e?1<<e:0||0===this.array.length)return this;var r=n>>>e&fn;if(r>=this.array.length)return new le([],t);var i,o=0===r;if(e>0){var s=this.array[r];if(i=s&&s.removeBefore(t,e-cn,n),i===s&&o)return this}if(o&&!i)return this;var a=ge(this,t);if(!o)for(var u=0;r>u;u++)a.array[u]=void 0;return i&&(a.array[r]=i),a},le.prototype.removeAfter=function(t,e,n){if(n===e?1<<e:0||0===this.array.length)return this;var r=n-1>>>e&fn;if(r>=this.array.length)return this;var i,o=r===this.array.length-1;if(e>0){var s=this.array[r];if(i=s&&s.removeAfter(t,e-cn,n),i===s&&o)return this}if(o&&!i)return this;var a=ge(this,t);return o||a.array.pop(),i&&(a.array[r]=i),a};var Kn,Jn={};t(Se,Rt),Se.of=function(){return this(arguments)},Se.prototype.toString=function(){return this.__toString("OrderedMap {","}")},Se.prototype.get=function(t,e){var n=this._map.get(t);return void 0!==n?this._list.get(n)[1]:e},Se.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):Oe()},Se.prototype.set=function(t,e){return Ee(this,t,e)},Se.prototype.remove=function(t){return Ee(this,t,ln)},Se.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},Se.prototype.__iterate=function(t,e){var n=this;return this._list.__iterate(function(e){return e&&t(e[1],e[0],n)},e)},Se.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},Se.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),n=this._list.__ensureOwner(t);return t?ke(e,n,t,this.__hash):(this.__ownerID=t,this._map=e,this._list=n,this)},Se.isOrderedMap=Ie,Se.prototype[gn]=!0,Se.prototype[un]=Se.prototype.remove;var Hn;t(je,J),je.of=function(){return this(arguments)},je.prototype.toString=function(){return this.__toString("Stack [","]")},je.prototype.get=function(t,e){var n=this._head;for(t=s(this,t);n&&t--;)n=n.next;return n?n.value:e},je.prototype.peek=function(){return this._head&&this._head.value},je.prototype.push=function(){if(0===arguments.length)return this;for(var t=this.size+arguments.length,e=this._head,n=arguments.length-1;n>=0;n--)e={value:arguments[n],next:e};return this.__ownerID?(this.size=t,this._head=e,this.__hash=void 0,this.__altered=!0,this):Ae(t,e)},je.prototype.pushAll=function(t){if(t=d(t),0===t.size)return this;at(t.size);var e=this.size,n=this._head;return t.reverse().forEach(function(t){e++,n={value:t,next:n}}),this.__ownerID?(this.size=e,this._head=n,this.__hash=void 0,this.__altered=!0,this):Ae(e,n)},je.prototype.pop=function(){return this.slice(1)},je.prototype.unshift=function(){return this.push.apply(this,arguments)},je.prototype.unshiftAll=function(t){return this.pushAll(t)},je.prototype.shift=function(){return this.pop.apply(this,arguments)},je.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Te()},je.prototype.slice=function(t,e){if(u(t,e,this.size))return this;var n=c(t,this.size),r=h(e,this.size);if(r!==this.size)return J.prototype.slice.call(this,t,e);for(var i=this.size-n,o=this._head;n--;)o=o.next;return this.__ownerID?(this.size=i,this._head=o,this.__hash=void 0,this.__altered=!0,this):Ae(i,o)},je.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Ae(this.size,this._head,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},je.prototype.__iterate=function(t,e){if(e)return this.reverse().__iterate(t);for(var n=0,r=this._head;r&&t(r.value,n++,this)!==!1;)r=r.next;return n},je.prototype.__iterator=function(t,e){if(e)return this.reverse().__iterator(t);var n=0,r=this._head;return new b(function(){if(r){var e=r.value;return r=r.next,x(t,n++,e)}return S()})},je.isStack=De;var Xn="@@__IMMUTABLE_STACK__@@",Gn=je.prototype;Gn[Xn]=!0,Gn.withMutations=Nn.withMutations,Gn.asMutable=Nn.asMutable,Gn.asImmutable=Nn.asImmutable,Gn.wasAltered=Nn.wasAltered;var Qn;t(Pe,H),Pe.of=function(){return this(arguments)},Pe.fromKeys=function(t){return this(p(t).keySeq())},Pe.prototype.toString=function(){return this.__toString("Set {","}")},Pe.prototype.has=function(t){return this._map.has(t)},Pe.prototype.add=function(t){return Me(this,this._map.set(t,!0))},Pe.prototype.remove=function(t){return Me(this,this._map.remove(t))},Pe.prototype.clear=function(){return Me(this,this._map.clear())},Pe.prototype.union=function(){var t=an.call(arguments,0);return t=t.filter(function(t){return 0!==t.size}),0===t.length?this:0!==this.size||this.__ownerID||1!==t.length?this.withMutations(function(e){for(var n=0;n<t.length;n++)v(t[n]).forEach(function(t){return e.add(t)})}):this.constructor(t[0])},Pe.prototype.intersect=function(){var t=an.call(arguments,0);if(0===t.length)return this;t=t.map(function(t){return v(t)});var e=this;return this.withMutations(function(n){e.forEach(function(e){t.every(function(t){return t.includes(e)})||n.remove(e)})})},Pe.prototype.subtract=function(){var t=an.call(arguments,0);if(0===t.length)return this;t=t.map(function(t){return v(t)});var e=this;return this.withMutations(function(n){e.forEach(function(e){t.some(function(t){return t.includes(e)})&&n.remove(e)})})},Pe.prototype.merge=function(){return this.union.apply(this,arguments)},Pe.prototype.mergeWith=function(t){var e=an.call(arguments,1);return this.union.apply(this,e)},Pe.prototype.sort=function(t){return Re(kt(this,t))},Pe.prototype.sortBy=function(t,e){return Re(kt(this,e,t))},Pe.prototype.wasAltered=function(){return this._map.wasAltered()},Pe.prototype.__iterate=function(t,e){var n=this;return this._map.__iterate(function(e,r){return t(r,r,n)},e)},Pe.prototype.__iterator=function(t,e){return this._map.map(function(t,e){return e}).__iterator(t,e)},Pe.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):(this.__ownerID=t,this._map=e,this)},Pe.isSet=ze;var Yn="@@__IMMUTABLE_SET__@@",Zn=Pe.prototype;Zn[Yn]=!0,Zn[un]=Zn.remove,Zn.mergeDeep=Zn.merge,Zn.mergeDeepWith=Zn.mergeWith,Zn.withMutations=Nn.withMutations,Zn.asMutable=Nn.asMutable,Zn.asImmutable=Nn.asImmutable,Zn.__empty=qe,Zn.__make=Ce;var tr;t(Re,Pe),Re.of=function(){return this(arguments)},Re.fromKeys=function(t){return this(p(t).keySeq())},Re.prototype.toString=function(){return this.__toString("OrderedSet {","}")},Re.isOrderedSet=Le;var er=Re.prototype;er[gn]=!0,er.__empty=Ve,er.__make=Ne;var nr;t(Fe,K),Fe.prototype.toString=function(){return this.__toString($e(this)+" {","}")},Fe.prototype.has=function(t){return this._defaultValues.hasOwnProperty(t)},Fe.prototype.get=function(t,e){if(!this.has(t))return e;var n=this._defaultValues[t];return this._map?this._map.get(t,n):n},Fe.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var t=this.constructor;return t._empty||(t._empty=Ue(this,Ht()))},Fe.prototype.set=function(t,e){if(!this.has(t))throw new Error('Cannot set unknown key "'+t+'" on '+$e(this));var n=this._map&&this._map.set(t,e);return this.__ownerID||n===this._map?this:Ue(this,n)},Fe.prototype.remove=function(t){if(!this.has(t))return this;var e=this._map&&this._map.remove(t);return this.__ownerID||e===this._map?this:Ue(this,e)},Fe.prototype.wasAltered=function(){return this._map.wasAltered()},Fe.prototype.__iterator=function(t,e){var n=this;return p(this._defaultValues).map(function(t,e){return n.get(e)}).__iterator(t,e)},Fe.prototype.__iterate=function(t,e){var n=this;return p(this._defaultValues).map(function(t,e){return n.get(e)}).__iterate(t,e)},Fe.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map&&this._map.__ensureOwner(t);return t?Ue(this,e,t):(this.__ownerID=t,this._map=e,this)};var rr=Fe.prototype;rr[un]=rr.remove,rr.deleteIn=rr.removeIn=Nn.removeIn,rr.merge=Nn.merge,rr.mergeWith=Nn.mergeWith,rr.mergeIn=Nn.mergeIn,rr.mergeDeep=Nn.mergeDeep,rr.mergeDeepWith=Nn.mergeDeepWith,rr.mergeDeepIn=Nn.mergeDeepIn,rr.setIn=Nn.setIn,rr.update=Nn.update,rr.updateIn=Nn.updateIn,rr.withMutations=Nn.withMutations,rr.asMutable=Nn.asMutable,rr.asImmutable=Nn.asImmutable,t(Je,T),Je.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(this._step>1?" by "+this._step:"")+" ]"},Je.prototype.get=function(t,e){return this.has(t)?this._start+s(this,t)*this._step:e},Je.prototype.includes=function(t){var e=(t-this._start)/this._step;return e>=0&&e<this.size&&e===Math.floor(e)},Je.prototype.slice=function(t,e){return u(t,e,this.size)?this:(t=c(t,this.size),e=h(e,this.size),t>=e?new Je(0,0):new Je(this.get(t,this._end),this.get(e,this._end),this._step))},Je.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step===0){var n=e/this._step;if(n>=0&&n<this.size)return n}return-1},Je.prototype.lastIndexOf=function(t){return this.indexOf(t)},Je.prototype.__iterate=function(t,e){for(var n=this.size-1,r=this._step,i=e?this._start+n*r:this._start,o=0;n>=o;o++){if(t(i,o,this)===!1)return o+1;i+=e?-r:r}return o},Je.prototype.__iterator=function(t,e){var n=this.size-1,r=this._step,i=e?this._start+n*r:this._start,o=0;return new b(function(){var s=i;return i+=e?-r:r,o>n?S():x(t,o++,s)})},Je.prototype.equals=function(t){return t instanceof Je?this._start===t._start&&this._end===t._end&&this._step===t._step:Ke(this,t)};var ir;t(He,T),He.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},He.prototype.get=function(t,e){return this.has(t)?this._value:e},He.prototype.includes=function(t){return X(this._value,t)},He.prototype.slice=function(t,e){var n=this.size;return u(t,e,n)?this:new He(this._value,h(e,n)-c(t,n))},He.prototype.reverse=function(){return this},He.prototype.indexOf=function(t){return X(this._value,t)?0:-1},He.prototype.lastIndexOf=function(t){return X(this._value,t)?this.size:-1},He.prototype.__iterate=function(t,e){for(var n=0;n<this.size;n++)if(t(this._value,n,this)===!1)return n+1;return n},He.prototype.__iterator=function(t,e){var n=this,r=0;return new b(function(){return r<n.size?x(t,r++,n._value):S()})},He.prototype.equals=function(t){return t instanceof He?X(this._value,t._value):Ke(t)};var or;l.Iterator=b,Xe(l,{toArray:function(){at(this.size);var t=new Array(this.size||0);return this.valueSeq().__iterate(function(e,n){t[n]=e}),t},toIndexedSeq:function(){return new ct(this)},toJS:function(){return this.toSeq().map(function(t){return t&&"function"==typeof t.toJS?t.toJS():t}).__toJS()},toJSON:function(){return this.toSeq().map(function(t){return t&&"function"==typeof t.toJSON?t.toJSON():t}).__toJS()},toKeyedSeq:function(){return new ut(this,!0)},toMap:function(){return Rt(this.toKeyedSeq())},toObject:function(){at(this.size);var t={};return this.__iterate(function(e,n){t[n]=e}),t},toOrderedMap:function(){return Se(this.toKeyedSeq())},toOrderedSet:function(){return Re(m(this)?this.valueSeq():this)},toSet:function(){return Pe(m(this)?this.valueSeq():this)},toSetSeq:function(){return new ht(this)},toSeq:function(){return g(this)?this.toIndexedSeq():m(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return je(m(this)?this.valueSeq():this)},toList:function(){return he(m(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){var t=an.call(arguments,0);return Dt(this,bt(this,t))},contains:function(t){return this.includes(t)},includes:function(t){return this.some(function(e){return X(e,t)})},entries:function(){return this.__iterator(bn)},every:function(t,e){at(this.size);var n=!0;return this.__iterate(function(r,i,o){return t.call(e,r,i,o)?void 0:(n=!1,!1)}),n},filter:function(t,e){return Dt(this,vt(this,t,e,!0))},find:function(t,e,n){var r=this.findEntry(t,e);return r?r[1]:n},findEntry:function(t,e){var n;return this.__iterate(function(r,i,o){return t.call(e,r,i,o)?(n=[i,r],!1):void 0}),n},findLastEntry:function(t,e){return this.toSeq().reverse().findEntry(t,e);
},forEach:function(t,e){return at(this.size),this.__iterate(e?t.bind(e):t)},join:function(t){at(this.size),t=void 0!==t?""+t:",";var e="",n=!0;return this.__iterate(function(r){n?n=!1:e+=t,e+=null!==r&&void 0!==r?r.toString():""}),e},keys:function(){return this.__iterator(_n)},map:function(t,e){return Dt(this,pt(this,t,e))},reduce:function(t,e,n){at(this.size);var r,i;return arguments.length<2?i=!0:r=e,this.__iterate(function(e,o,s){i?(i=!1,r=e):r=t.call(n,r,e,o,s)}),r},reduceRight:function(t,e,n){var r=this.toKeyedSeq().reverse();return r.reduce.apply(r,arguments)},reverse:function(){return Dt(this,dt(this,!0))},slice:function(t,e){return Dt(this,gt(this,t,e,!0))},some:function(t,e){return!this.every(Ye(t),e)},sort:function(t){return Dt(this,kt(this,t))},values:function(){return this.__iterator(wn)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function(t,e){return o(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return yt(this,t,e)},equals:function(t){return Ke(this,t)},entrySeq:function(){var t=this;if(t._cache)return new z(t._cache);var e=t.toSeq().map(Qe).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter(Ye(t),e)},findLast:function(t,e,n){return this.toKeyedSeq().reverse().find(t,e,n)},first:function(){return this.find(a)},flatMap:function(t,e){return Dt(this,St(this,t,e))},flatten:function(t){return Dt(this,xt(this,t,!0))},fromEntrySeq:function(){return new ft(this)},get:function(t,e){return this.find(function(e,n){return X(n,t)},void 0,e)},getIn:function(t,e){for(var n,r=this,i=qt(t);!(n=i.next()).done;){var o=n.value;if(r=r&&r.get?r.get(o,ln):ln,r===ln)return e}return r},groupBy:function(t,e){return mt(this,t,e)},has:function(t){return this.get(t,ln)!==ln},hasIn:function(t){return this.getIn(t,ln)!==ln},isSubset:function(t){return t="function"==typeof t.includes?t:l(t),this.every(function(e){return t.includes(e)})},isSuperset:function(t){return t.isSubset(this)},keySeq:function(){return this.toSeq().map(Ge).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},max:function(t){return Ot(this,t)},maxBy:function(t,e){return Ot(this,e,t)},min:function(t){return Ot(this,t?Ze(t):nn)},minBy:function(t,e){return Ot(this,e?Ze(e):nn,t)},rest:function(){return this.slice(1)},skip:function(t){return this.slice(Math.max(0,t))},skipLast:function(t){return Dt(this,this.toSeq().reverse().skip(t).reverse())},skipWhile:function(t,e){return Dt(this,wt(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile(Ye(t),e)},sortBy:function(t,e){return Dt(this,kt(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return Dt(this,this.toSeq().reverse().take(t).reverse())},takeWhile:function(t,e){return Dt(this,_t(this,t,e))},takeUntil:function(t,e){return this.takeWhile(Ye(t),e)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=rn(this))}});var sr=l.prototype;sr[vn]=!0,sr[In]=sr.values,sr.__toJS=sr.toArray,sr.__toStringMapper=tn,sr.inspect=sr.toSource=function(){return this.toString()},sr.chain=sr.flatMap,function(){try{Object.defineProperty(sr,"length",{get:function(){if(!l.noLengthWarning){var t;try{throw new Error}catch(e){t=e.stack}if(-1===t.indexOf("_wrapObject"))return console&&console.warn&&console.warn("iterable.length has been deprecated, use iterable.size or iterable.count(). This warning will become a silent error in a future version. "+t),this.size}}})}catch(t){}}(),Xe(p,{flip:function(){return Dt(this,lt(this))},findKey:function(t,e){var n=this.findEntry(t,e);return n&&n[0]},findLastKey:function(t,e){return this.toSeq().reverse().findKey(t,e)},keyOf:function(t){return this.findKey(function(e){return X(e,t)})},lastKeyOf:function(t){return this.findLastKey(function(e){return X(e,t)})},mapEntries:function(t,e){var n=this,r=0;return Dt(this,this.toSeq().map(function(i,o){return t.call(e,[o,i],r++,n)}).fromEntrySeq())},mapKeys:function(t,e){var n=this;return Dt(this,this.toSeq().flip().map(function(r,i){return t.call(e,r,i,n)}).flip())}});var ar=p.prototype;ar[yn]=!0,ar[In]=sr.entries,ar.__toJS=sr.toObject,ar.__toStringMapper=function(t,e){return JSON.stringify(e)+": "+tn(t)},Xe(d,{toKeyedSeq:function(){return new ut(this,!1)},filter:function(t,e){return Dt(this,vt(this,t,e,!1))},findIndex:function(t,e){var n=this.findEntry(t,e);return n?n[0]:-1},indexOf:function(t){var e=this.toKeyedSeq().keyOf(t);return void 0===e?-1:e},lastIndexOf:function(t){return this.toSeq().reverse().indexOf(t)},reverse:function(){return Dt(this,dt(this,!1))},slice:function(t,e){return Dt(this,gt(this,t,e,!1))},splice:function(t,e){var n=arguments.length;if(e=Math.max(0|e,0),0===n||2===n&&!e)return this;t=c(t,this.size);var r=this.slice(0,t);return Dt(this,1===n?r:r.concat(i(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var n=this.toKeyedSeq().findLastKey(t,e);return void 0===n?-1:n},first:function(){return this.get(0)},flatten:function(t){return Dt(this,xt(this,t,!1))},get:function(t,e){return t=s(this,t),0>t||this.size===1/0||void 0!==this.size&&t>this.size?e:this.find(function(e,n){return n===t},void 0,e)},has:function(t){return t=s(this,t),t>=0&&(void 0!==this.size?this.size===1/0||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return Dt(this,It(this,t))},interleave:function(){var t=[this].concat(i(arguments)),e=jt(this.toSeq(),T.of,t),n=e.flatten(!0);return e.size&&(n.size=e.size*t.length),Dt(this,n)},last:function(){return this.get(-1)},skipWhile:function(t,e){return Dt(this,wt(this,t,e,!1))},zip:function(){var t=[this].concat(i(arguments));return Dt(this,jt(this,en,t))},zipWith:function(t){var e=i(arguments);return e[0]=this,Dt(this,jt(this,t,e))}}),d.prototype[mn]=!0,d.prototype[gn]=!0,Xe(v,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),v.prototype.has=sr.includes,Xe(A,p.prototype),Xe(T,d.prototype),Xe(P,v.prototype),Xe(K,p.prototype),Xe(J,d.prototype),Xe(H,v.prototype);var ur={Iterable:l,Seq:D,Collection:W,Map:Rt,OrderedMap:Se,List:he,Stack:je,Set:Pe,OrderedSet:Re,Record:Fe,Range:Je,Repeat:He,is:X,fromJS:G};return ur})},function(t,e,n){var r,i,o;(function(s){!function(n,s){i=[],r=s,o="function"==typeof r?r.apply(e,i):r,!(void 0!==o&&(t.exports=o))}(this,function(){return function(){"use strict";function t(t,e,n){return t===e?n?!0:!1:void 0===t?!0:void 0===e?!1:null===t?!0:null===e?!1:e>t}function e(t,e,n){return t===e?n?!0:!1:void 0===t?!1:void 0===e?!0:null===t?!1:null===e?!0:t>e}function r(n,r,i){return n===r?0:i?t(n,r)?1:-1:e(n,r)?1:-1}function i(t,e){return Array.isArray(t)?function(e){return-1!==t.indexOf(e)}:"string"==typeof t?function(e){return-1!==t.indexOf(e)}:t&&"object"==typeof t?function(e){return t.hasOwnProperty(e)}:void 0}function o(t,e){var n,r=e||"parse-stringify";return"parse-stringify"===r&&(n=JSON.parse(JSON.stringify(t))),n}function a(){try{return"localStorage"in window&&null!==window.localStorage}catch(t){return!1}}function u(){}function c(t,e){this.filename=t||"loki.db",this.collections=[],this.databaseVersion=1.1,this.engineVersion=1.1,this.autosave=!1,this.autosaveInterval=5e3,this.autosaveHandle=null,this.options={},this.persistenceMethod=null,this.persistenceAdapter=null,this.events={init:[],flushChanges:[],close:[],changes:[],warning:[]};var n=function(){return"undefined"==typeof window?"NODEJS":"undefined"!=typeof s&&s.window?"NODEJS":"undefined"!=typeof document?-1===document.URL.indexOf("http://")&&-1===document.URL.indexOf("https://")?"CORDOVA":"BROWSER":"CORDOVA"};e&&e.hasOwnProperty("env")?this.ENV=e.env:this.ENV=n(),"undefined"===this.ENV&&(this.ENV="NODEJS"),this.configureOptions(e,!0),this.on("init",this.clearChanges)}function h(){this.fs=n(49)}function f(){}function l(t,e,n,r){return this.collection=t,this.searchIsChained=!e&&!n,this.filteredrows=[],this.filterInitialized=!1,"undefined"!=typeof e&&null!==e?this.find(e,r):"undefined"!=typeof n&&null!==n?this.where(n):this}function p(t,e,n){this.collection=t,this.name=e,this.persistent=!1,"undefined"!=typeof n&&(this.persistent=n),this.resultset=new l(t),this.resultdata=[],this.resultsdirty=!1,this.cachedresultset=null,this.filterPipeline=[],this.sortFunction=null,this.sortCriteria=null,this.sortDirty=!1,this.events={rebuild:[]}}function d(t,e){function n(t,e,n){f.changes.push({name:t,operation:e,obj:JSON.parse(JSON.stringify(n))})}function r(){f.changes=[]}function i(t){t&&(t.meta||(t.meta={}),t.meta.created=(new Date).getTime(),t.meta.revision=0)}function o(t){t&&(t.meta.updated=(new Date).getTime(),t.meta.revision+=1)}function s(t){n(f.name,"I",t)}function a(t){n(f.name,"U",t)}function u(t){i(t),s(t)}function c(t){o(t),a(t)}function h(){d=f.disableChangesApi?i:u,v=f.disableChangesApi?o:c}this.name=t,this.data=[],this.idIndex=[],this.binaryIndices={},this.constraints={unique:{},exact:{}},this.objType=t,this.dirty=!0,this.cachedIndex=null,this.cachedBinaryIndex=null,this.cachedData=null;var f=this;e=e||{},e.hasOwnProperty("unique")&&e.unique.forEach(function(t){f.constraints.unique[t]=new k(t)}),e.hasOwnProperty("exact")&&e.exact.forEach(function(t){f.constraints.exact[t]=new O(t)}),this.transactional=e.hasOwnProperty("transactional")?e.transactional:!1,this.cloneObjects=e.hasOwnProperty("clone")?e.clone:!1,this.asyncListeners=e.hasOwnProperty("asyncListeners")?e.asyncListeners:!1,this.disableChangesApi=e.hasOwnProperty("disableChangesApi")?e.disableChangesApi:!0,this.maxId=0,this.DynamicViews=[],this.events={insert:[],update:[],"pre-insert":[],"pre-update":[],close:[],flushbuffer:[],error:[],"delete":[],warning:[]},this.changes=[],this.ensureId();var l=[];if(e&&e.indices)if("[object Array]"===Object.prototype.toString.call(e.indices))l=e.indices;else{if("string"!=typeof e.indices)throw new TypeError("Indices needs to be a string or an array of strings");l=[e.indices]}for(var p=0;p<l.length;p++)this.ensureIndex(l[p]);this.getChanges=function(){return f.changes},this.flushChanges=r;var d,v;h(),this.setChangesApi=function(t){f.disableChangesApi=!t,h()},this.on("insert",function(t){d(t)}),this.on("update",function(t){v(t)}),this.on("delete",function(t){f.disableChangesApi||n(f.name,"R",t)}),this.on("warning",console.warn),r()}function v(t){return-1!==t.indexOf(".")}function y(t){return parseFloat(t,10)}function m(t,e){return t+e}function g(t,e){return t-e}function _(t){return t.reduce(m,0)/t.length}function w(t){var e=_(t),n=t.map(function(t){var n=t-e,r=n*n;return r}),r=_(n),i=Math.sqrt(r);return i}function b(t,e,n){if(n===!1)return t[e];for(var r=e.split("."),i=t;r.length>0;)i=i[r.shift()];return i}function x(t,e,n){for(var r,i,o=0,s=t.length;s>o;){if(i=(o+s)/2|0,r=n.apply(null,[e,t[i]]),0===r)return{found:!0,index:i};0>r?s=i:o=i+1}return{found:!1,index:s}}function S(t){return function(e,n){return x(e,n,t)}}function I(){}function k(t){this.field=t}function O(t){this.index={},this.field=t}function E(t){this.field=t}var j={copyProperties:function(t,e){var n;for(n in t)e[n]=t[n]}},D={$eq:function(t,e){return t===e},$gt:function(t,n){return e(t,n)},$gte:function(t,n){return e(t,n,!0)},$lt:function(e,n){return t(e,n)},$lte:function(e,n){return t(e,n,!0)},$ne:function(t,e){return t!==e},$regex:function(t,e){return e.test(t)},$in:function(t,e){return e.indexOf(t)>-1},$containsAny:function(t,e){var n;return Array.isArray(e)||(e=[e]),n=i(t,e)||function(){return!1},e.reduce(function(t,e){return t?t:n(e)},!1)},$contains:function(t,e){var n;return Array.isArray(e)||(e=[e]),n=i(t,e)||function(){return!0},e.reduce(function(t,e){return t?n(e):t},!0)}},A={$eq:D.$eq,$gt:D.$gt,$gte:D.$gte,$lt:D.$lt,$lte:D.$lte,$ne:D.$ne,$regex:D.$regex,$in:D.$in,$contains:D.$contains,$containsAny:D.$containsAny};return u.prototype.events={},u.prototype.asyncListeners=!1,u.prototype.on=function(t,e){var n=this.events[t];return n||(n=this.events[t]=[]),n.push(e),e},u.prototype.emit=function(t,e){var n=this;if(!t||!this.events[t])throw new Error("No event "+t+" defined");this.events[t].forEach(function(t){n.asyncListeners?setTimeout(function(){t(e)},1):t(e)})},u.prototype.removeListener=function(t,e){if(this.events[t]){var n=this.events[t];n.splice(n.indexOf(e),1)}},c.prototype=new u,c.prototype.configureOptions=function(t,e){var n={NODEJS:"fs",BROWSER:"localStorage",CORDOVA:"localStorage"},r={fs:h,localStorage:f};if(this.options={},this.persistenceMethod=null,this.persistenceAdapter=null,"undefined"!=typeof t){if(this.options=t,this.options.hasOwnProperty("persistenceMethod")&&"function"==typeof r[t.persistenceMethod]&&(this.persistenceMethod=t.persistenceMethod,this.persistenceAdapter=new r[t.persistenceMethod]),this.options.hasOwnProperty("adapter")&&(this.persistenceMethod="adapter",this.persistenceAdapter=t.adapter),t.hasOwnProperty("autoload")&&"undefined"!=typeof e&&e){var i=this;setTimeout(function(){i.loadDatabase(t,t.autoloadCallback)},1)}this.options.hasOwnProperty("autosaveInterval")&&(this.autosaveDisable(),this.autosaveInterval=parseInt(this.options.autosaveInterval,10)),this.options.hasOwnProperty("autosave")&&this.options.autosave&&(this.autosaveDisable(),this.autosave=!0,this.autosaveEnable())}null===this.persistenceAdapter&&(this.persistenceMethod=n[this.ENV],this.persistenceMethod&&(this.persistenceAdapter=new r[this.persistenceMethod]))},c.prototype.anonym=function(t,e){var n=new d("anonym",e);return n.insert(t),n},c.prototype.addCollection=function(t,e){var n=new d(t,e);return this.collections.push(n),n},c.prototype.loadCollection=function(t){if(!t.name)throw new Error("Collection must be have a name property to be loaded");this.collections.push(t)},c.prototype.getCollection=function(t){var e,n=this.collections.length;for(e=0;n>e;e+=1)if(this.collections[e].name===t)return this.collections[e];return this.emit("warning","collection "+t+" not found"),null},c.prototype.listCollections=function(){for(var t=this.collections.length,e=[];t--;)e.push({name:this.collections[t].name,type:this.collections[t].objType,count:this.collections[t].data.length});return e},c.prototype.removeCollection=function(t){var e,n=this.collections.length;for(e=0;n>e;e+=1)if(this.collections[e].name===t)return void this.collections.splice(e,1)},c.prototype.getName=function(){return this.name},c.prototype.serializeReplacer=function(t,e){switch(t){case"autosaveHandle":return null;case"persistenceAdapter":return null;default:return e}},c.prototype.serialize=function(){return JSON.stringify(this,this.serializeReplacer)},c.prototype.toJson=c.prototype.serialize,c.prototype.loadJSON=function(t,e){var n,r,i,o,s=JSON.parse(t),a=0,u=s.collections.length;for(this.name=s.name,this.databaseVersion=1,s.hasOwnProperty("databaseVersion")&&(this.databaseVersion=s.databaseVersion),this.collections=[],a;u>a;a+=1){if(n=s.collections[a],r=this.addCollection(n.name),i=n.data.length,o=0,e&&e.hasOwnProperty(n.name)){var c=e[n.name].inflate?e[n.name].inflate:j.copyProperties;for(o;i>o;o++){var h=new e[n.name].proto;c(n.data[o],h),r.data[o]=h}}else for(o;i>o;o++)r.data[o]=n.data[o];if(r.transactional=n.transactional,r.asyncListeners=n.asyncListeners,r.disableChangesApi=n.disableChangesApi,r.cloneObjects=n.cloneObjects,r.maxId=0===n.data.length?0:n.maxId,r.idIndex=n.idIndex,"undefined"!=typeof n.indices&&(r.idIndex=n.indices.id),"undefined"!=typeof n.binaryIndices&&(r.binaryIndices=n.binaryIndices),r.ensureId(),"undefined"!=typeof n.DynamicViews)for(var f=0;f<n.DynamicViews.length;f++){var l=n.DynamicViews[f],p=r.addDynamicView(l.name,l.persistent);p.resultdata=l.resultdata,p.resultsdirty=l.resultsdirty,p.filterPipeline=l.filterPipeline,p.sortCriteria=l.sortCriteria,p.sortFunction=null,p.sortDirty=l.sortDirty,p.resultset.filteredrows=l.resultset.filteredrows,p.resultset.searchIsChained=l.resultset.searchIsChained,p.resultset.filterInitialized=l.resultset.filterInitialized,p.rematerialize({removeWhereFilters:!0})}}},c.prototype.close=function(t){this.autosave&&(this.autosaveDisable(),this.autosaveDirty()&&this.saveDatabase()),t&&this.on("close",t),this.emit("close")},c.prototype.generateChangesNotification=function(t){function e(t){return t.name}var n=[],r=t||this.collections.map(e);return this.collections.forEach(function(t){-1!==r.indexOf(e(t))&&(n=n.concat(t.getChanges()))}),n},c.prototype.serializeChanges=function(t){return JSON.stringify(this.generateChangesNotification(t))},c.prototype.clearChanges=function(){this.collections.forEach(function(t){t.flushChanges&&t.flushChanges()})},h.prototype.loadDatabase=function(t,e){this.fs.readFile(t,{encoding:"utf8"},function(t,n){e(t?new Error(t):n)})},h.prototype.saveDatabase=function(t,e,n){this.fs.writeFile(t,e,n)},f.prototype.loadDatabase=function(t,e){e(a()?localStorage.getItem(t):new Error("localStorage is not available"))},f.prototype.saveDatabase=function(t,e,n){a()?(localStorage.setItem(t,e),n(null)):n(new Error("localStorage is not available"))},c.prototype.loadDatabase=function(t,e){var n=e||function(t,e){if(t)throw t},r=this;null!==this.persistenceAdapter?this.persistenceAdapter.loadDatabase(this.filename,function(e){"string"==typeof e?(r.loadJSON(e,t||{}),n(null)):(console.warn("lokijs loadDatabase : Database not found"),n("object"==typeof e?e:"Database not found"))}):n(new Error("persistenceAdapter not configured"))},c.prototype.saveDatabase=function(t){var e=t||function(t){if(t)throw t},n=this;null!==this.persistenceAdapter?this.persistenceAdapter.saveDatabase(this.filename,n.serialize(),function(){n.autosaveClearFlags(),e(null)}):e(new Error("persistenceAdapter not configured"))},c.prototype.save=c.prototype.saveDatabase,c.prototype.autosaveDirty=function(){for(var t=0;t<this.collections.length;t++)if(this.collections[t].dirty)return!0;return!1},c.prototype.autosaveClearFlags=function(){for(var t=0;t<this.collections.length;t++)this.collections[t].dirty=!1},c.prototype.autosaveEnable=function(){this.autosave=!0;var t=5e3,e=this;"undefined"!=typeof this.autosaveInterval&&null!==this.autosaveInterval&&(t=this.autosaveInterval),this.autosaveHandle=setInterval(function(){e.autosaveDirty()&&e.saveDatabase()},t)},c.prototype.autosaveDisable=function(){"undefined"!=typeof this.autosaveHandle&&null!==this.autosaveHandle&&(clearInterval(this.autosaveHandle),this.autosaveHandle=null)},l.prototype.toJSON=function(){var t=this.copy();return t.collection=null,t},l.prototype.limit=function(t){this.searchIsChained&&!this.filterInitialized&&0===this.filteredrows.length&&(this.filteredrows=Object.keys(this.collection.data));var e=this.copy();return e.filteredrows=e.filteredrows.slice(0,t),e},l.prototype.offset=function(t){this.searchIsChained&&!this.filterInitialized&&0===this.filteredrows.length&&(this.filteredrows=Object.keys(this.collection.data));var e=this.copy();return e.filteredrows=e.filteredrows.splice(t,e.filteredrows.length),e},l.prototype.copy=function(){var t=new l(this.collection,null,null);return t.filteredrows=this.filteredrows.slice(),t.filterInitialized=this.filterInitialized,t},l.prototype.branch=l.prototype.copy,l.prototype.sort=function(t){this.searchIsChained&&!this.filterInitialized&&0===this.filteredrows.length&&(this.filteredrows=Object.keys(this.collection.data));var e=function(t,e){return function(n,r){var i=e.collection.data[n],o=e.collection.data[r];return t(i,o)}}(t,this);return this.filteredrows.sort(e),this},l.prototype.simplesort=function(t,e){this.searchIsChained&&!this.filterInitialized&&0===this.filteredrows.length&&(this.filteredrows=Object.keys(this.collection.data)),"undefined"==typeof e&&(e=!1);var n=function(t,e,n){return function(i,o){var s=n.collection.data[i],a=n.collection.data[o];return r(s[t],a[t],e)}}(t,e,this);return this.filteredrows.sort(n),this},l.prototype.compoundeval=function(t,e,n){var i=t.length;if(0===i)throw new Error("Invalid call to compoundeval, need at least one property");var o=!1,s=t[0];return"string"!=typeof s&&Array.isArray(s)&&(o=s[1],s=s[0]),e[s]===n[s]?1===i?0:this.compoundeval(t.slice(1),e,n,o):r(e[s],n[s],o)},l.prototype.compoundsort=function(t){this.searchIsChained&&!this.filterInitialized&&0===this.filteredrows.length&&(this.filteredrows=Object.keys(this.collection.data));var e=function(t,e){return function(n,r){var i=e.collection.data[n],o=e.collection.data[r];return e.compoundeval(t,i,o)}}(t,this);return this.filteredrows.sort(e),this},l.prototype.calculateRange=function(n,r,i){var o=this.collection.data,s=this.collection.binaryIndices[r].values,a=0,u=s.length-1,c=null,h=0,f=s.length-1;if(0===o.length)return[0,-1];var l=o[s[a]][r],p=o[s[u]][r];switch(n){case"$eq":if(t(i,l)||e(i,p))return[0,-1];break;case"$gt":if(e(i,p,!0))return[0,-1];break;case"$gte":if(e(i,p))return[0,-1];break;case"$lt":if(t(i,l,!0))return[0,-1];break;case"$lte":if(t(i,l))return[0,-1]}for(;u>a;)c=Math.floor((a+u)/2),t(o[s[c]][r],i)?a=c+1:u=c;for(h=a,a=0,u=s.length-1;u>a;)c=Math.floor((a+u)/2),t(i,o[s[c]][r])?u=c:a=c+1;f=u;var d=o[s[h]][r],v=o[s[f]][r];switch(n){case"$eq":return d!==i?[0,-1]:(v!==i&&f--,[h,f]);case"$gt":return t(v,i,!0)?[0,-1]:[f,o.length-1];case"$gte":return t(d,i)?[0,-1]:[h,o.length-1];case"$lt":return 0===h&&t(d,i)?[0,0]:[0,h-1];case"$lte":return v!==i&&f--,0===f&&t(v,i)?[0,0]:[0,f];default:return[0,o.length-1]}},l.prototype.findOr=function(t){var e=0,n=0,r=null,i=[],o=null;if(this.filterInitialized){for(i=[],n=0;n<t.length;n++)for(o=this.branch(),o.find(t[n]),o.data(),r=o.filteredrows,e=0;e<r.length;e++)-1===i.indexOf(r[e])&&i.push(r[e]);this.filteredrows=i}else for(n=0;n<t.length;n++)for(o=this.collection.chain(),o.find(t[n]),o.data(),r=o.filteredrows,e=0;e<r.length;e++)-1===this.filteredrows.indexOf(r[e])&&this.filteredrows.push(r[e]);return this.filterInitialized=!0,this},l.prototype.findAnd=function(t){for(var e=0;e<t.length;e++)this.find(t[e]);return this},l.prototype.dotSubScan=function(t,e,n,r){var i,o,s,a=null,u=e.split(".");for(i=0;i<u.length;i++)if(s=u[i],a){for(o=0;o<a.length;o++)if(n(a[o][s],r))return!0}else t=t[s],Array.isArray(t)&&(a=t);return n(t,r)},l.prototype.find=function(t,e){if(0===this.collection.data.length)return this.searchIsChained?(this.filteredrows=[],this.filterInitialized=!0,this):[];var n,r,i,o,s,a,u,c,h=t||"getAll",f=!1,l=[],p=null,d=!0;e=e||!1;for(o in h){d=!1;break}if(d&&(h="getAll"),"getAll"===h)return this.searchIsChained?(this.filteredrows=Object.keys(this.collection.data),this):this.collection.data;var v=!1;for(o in h)if(h.hasOwnProperty(o)){if(n=o,"$and"===o)return this.searchIsChained?(this.findAnd(h[o]),e&&this.filteredrows.length>1&&(this.filteredrows=this.filteredrows.slice(0,1)),this):(l=this.collection.chain().findAnd(h[o]).data(),e?0===l.length?[]:l[0]:l);if("$or"===o)return this.searchIsChained?(this.findOr(h[o]),e&&this.filteredrows.length>1&&(this.filteredrows=this.filteredrows.slice(0,1)),this):(l=this.collection.chain().findOr(h[o]).data(),e?0===l.length?[]:l[0]:l);if(-1!=o.indexOf(".")&&(v=!0),"object"!=typeof h[o])i="$eq",r=h[o];else{if("object"!=typeof h[o])throw"Do not know what you want to do.";for(s in h[o])h[o].hasOwnProperty(s)&&(i=s,r=h[o][s])}break}if("$regex"===i&&(r=new RegExp(r)),null===this.collection.data)throw new TypeError;if((!this.searchIsChained||this.searchIsChained&&!this.filterInitialized)&&"$ne"!==i&&"$regex"!==i&&"$contains"!==i&&"$containsAny"!==i&&"$in"!==i&&this.collection.binaryIndices.hasOwnProperty(n)&&(this.collection.ensureIndex(n),f=!0,p=this.collection.binaryIndices[n]),a=A[i],this.searchIsChained){if(this.filterInitialized){if(f)for(u=p,c=this.filteredrows.length;c--;)a(u[this.filteredrows[c]],r)&&l.push(this.filteredrows[c]);else if(u=this.collection.data,c=this.filteredrows.length,v)for(;c--;)this.dotSubScan(u[this.filteredrows[c]],n,a,r)&&l.push(this.filteredrows[c]);else for(;c--;)a(u[this.filteredrows[c]][n],r)&&l.push(this.filteredrows[c]);return this.filteredrows=l,this}if(f){u=this.collection.data;for(var y=this.calculateRange(i,n,r,this),m=y[0];m<=y[1];m++)l.push(p.values[m]);this.filteredrows=l}else if(u=this.collection.data,c=u.length,v)for(;c--;)this.dotSubScan(u[c],n,a,r)&&l.push(c);else for(;c--;)a(u[c][n],r)&&l.push(c);return this.filteredrows=l,this.filterInitialized=!0,this}if(f){u=this.collection.data;var y=this.calculateRange(i,n,r,this);if(e)return-1!==y[1]?u[p.values[y[0]]]:[];for(c=y[0];c<=y[1];c++)l.push(u[p.values[c]]);this.filteredrows=l}else{if(u=this.collection.data,c=u.length,e){for(;c--;)if(a(u[c][n],r))return u[c];return[]}if(v)for(;c--;)this.dotSubScan(u[c],n,a,r)&&l.push(u[c]);else for(;c--;)a(u[c][n],r)&&l.push(u[c])}return l},l.prototype.where=function(t){var e,n=[];if("function"!=typeof t)throw"Argument is not a stored view or a function";e=t;try{if(this.searchIsChained){if(this.filterInitialized){for(var r=this.filteredrows.length;r--;)e(this.collection.data[this.filteredrows[r]])===!0&&n.push(this.filteredrows[r]);return this.filteredrows=n,this}for(var r=this.collection.data.length;r--;)e(this.collection.data[r])===!0&&n.push(r);return this.filteredrows=n,this.filterInitialized=!0,this}for(var r=this.collection.data.length;r--;)e(this.collection.data[r])===!0&&n.push(this.collection.data[r]);return n}catch(i){throw i}},l.prototype.data=function(){var t=[];if(this.searchIsChained&&!this.filterInitialized){if(0===this.filteredrows.length)return this.collection.data;this.filterInitialized=!0}var e,n=this.collection.data,r=this.filteredrows,i=this.filteredrows.length;for(e=0;i>e;e++)t.push(n[r[e]]);return t},l.prototype.update=function(t){if("function"!=typeof t)throw"Argument is not a function";this.searchIsChained&&!this.filterInitialized&&0===this.filteredrows.length&&(this.filteredrows=Object.keys(this.collection.data));for(var e=this.filteredrows.length,n=this.collection.data,r=0;e>r;r++)t(n[this.filteredrows[r]]),this.collection.update(n[this.filteredrows[r]]);return this},l.prototype.remove=function(){this.searchIsChained&&!this.filterInitialized&&0===this.filteredrows.length&&(this.filteredrows=Object.keys(this.collection.data));for(var t=this.filteredrows.length,e=0;t>e;e++)this.collection.remove(this.filteredrows[e]);return this.filteredrows=[],this},l.prototype.mapReduce=function(t,e){try{return e(this.data().map(t))}catch(n){throw n}},l.prototype.eqJoin=function(t,e,n,r){var i,o,s,a=[],u=[],c=[],h="function"==typeof e,f="function"==typeof n,p={};if(a=this.data(),i=a.length,t instanceof l)u=t.data();else{if(!Array.isArray(t))throw new TypeError("joinData needs to be an array or result set");u=t}o=u.length;for(var v=0;o>v;v++)s=f?n(u[v]):u[v][n],p[s]=u[v];r||(r=function(t,e){return{left:t,right:e}});for(var v=0;i>v;v++)s=h?e(a[v]):a[v][e],c.push(r(a[v],p[s]||{}));return this.collection=new d("joinData"),this.collection.insert(c),this.filteredrows=[],this.filterInitialized=!1,this},l.prototype.map=function(t){var e=this.data().map(t);return this.collection=new d("mappedData"),this.collection.insert(e),this.filteredrows=[],this.filterInitialized=!1,this},p.prototype=new u,p.prototype.rematerialize=function(t){var e,n,r;if(t=t||{},this.resultdata=[],this.resultsdirty=!0,this.resultset=new l(this.collection),(this.sortFunction||this.sortCriteria)&&(this.sortDirty=!0),t.hasOwnProperty("removeWhereFilters"))for(e=this.filterPipeline.length,n=e;n--;)"where"===this.filterPipeline[n].type&&(n!==this.filterPipeline.length-1&&(this.filterPipeline[n]=this.filterPipeline[this.filterPipeline.length-1]),this.filterPipeline.length--);var i=this.filterPipeline;for(this.filterPipeline=[],e=i.length,r=0;e>r;r++)this.applyFind(i[r].val);return this.data(),this.emit("rebuild",this),this},p.prototype.branchResultset=function(){return this.resultset.copy()},p.prototype.toJSON=function(){var t=new p(this.collection,this.name,this.persistent);return t.resultset=this.resultset,t.resultdata=[],t.resultsdirty=!0,t.filterPipeline=this.filterPipeline,t.sortFunction=this.sortFunction,t.sortCriteria=this.sortCriteria,t.sortDirty=this.sortDirty,t.collection=null,t},p.prototype.applySort=function(t){return this.sortFunction=t,this.sortCriteria=null,this.queueSortPhase(),this},p.prototype.applySimpleSort=function(t,e){return"undefined"==typeof e&&(e=!1),this.sortCriteria=[[t,e]],this.sortFunction=null,this.queueSortPhase(),this},p.prototype.applySortCriteria=function(t){return this.sortCriterial=t,this.sortFunction=null,this.queueSortPhase(),this},p.prototype.startTransaction=function(){return this.cachedresultset=this.resultset.copy(),this},p.prototype.commit=function(){return this.cachedresultset=null,this},p.prototype.rollback=function(){return this.resultset=this.cachedresultset,this.persistent&&(this.resultdata=this.resultset.data(),this.emit("rebuild",this)),this},p.prototype.applyFind=function(t){return this.filterPipeline.push({type:"find",val:t}),this.resultset.find(t),(this.sortFunction||this.sortCriteria)&&(this.sortDirty=!0,this.queueSortPhase()),this.persistent&&(this.resultsdirty=!0,this.queueSortPhase()),this},p.prototype.applyWhere=function(t){return this.filterPipeline.push({type:"where",val:t}),this.resultset.where(t),(this.sortFunction||this.sortCriteria)&&(this.sortDirty=!0,this.queueSortPhase()),this.persistent&&(this.resultsdirty=!0,this.queueSortPhase()),this},p.prototype.data=function(){return(this.sortDirty||this.resultsdirty||!this.resultset.filterInitialized)&&this.performSortPhase(),this.persistent?this.resultdata:this.resultset.data()},p.prototype.queueSortPhase=function(){var t=this;this.sortDirty||(this.sortDirty=!0,setTimeout(function(){t.performSortPhase()},1))},p.prototype.performSortPhase=function(){if(this.sortDirty||this.resultsdirty||!this.resultset.filterInitialized){if(this.sortFunction&&this.resultset.sort(this.sortFunction),this.sortCriteria&&this.resultset.compoundsort(this.sortCriteria),!this.persistent)return void(this.sortDirty=!1);this.resultdata=this.resultset.data(),this.resultsdirty=!1,this.sortDirty=!1,this.emit("rebuild",this)}},p.prototype.evaluateDocument=function(t){var e=this.resultset.filteredrows,n=e.indexOf(t),r=e.length,i=new l(this.collection);i.filteredrows=[t],i.filterInitialized=!0;for(var o=0;o<this.filterPipeline.length;o++)switch(this.filterPipeline[o].type){case"find":i.find(this.filterPipeline[o].val);break;case"where":i.where(this.filterPipeline[o].val)}var s=0===i.filteredrows.length?-1:0;return-1!=n||-1!=s?-1===n&&-1!==s?(e.push(t),this.persistent&&this.resultdata.push(this.collection.data[t]),void((this.sortFunction||this.sortCriteria)&&this.queueSortPhase())):-1!==n&&-1===s?(r-1>n?(e[n]=e[r-1],e.length=r-1,this.persistent&&(this.resultdata[n]=this.resultdata[r-1],this.resultdata.length=r-1)):(e.length=r-1,this.persistent&&(this.resultdata.length=r-1)),void((this.sortFunction||this.sortCriteria)&&this.queueSortPhase())):-1!==n&&-1!==s?(this.persistent&&(this.resultdata[n]=this.collection.data[t]),void((this.sortFunction||this.sortCriteria)&&(this.sortDirty=!0))):void 0:void 0},p.prototype.removeDocument=function(t){var e,n=this.resultset.filteredrows,r=n.indexOf(t),i=n.length;for(-1!==r&&(i-1>r?(n[r]=n[i-1],n.length=i-1,this.persistent&&(this.resultdata[r]=this.resultdata[i-1],this.resultdata.length=i-1)):(n.length=i-1,this.persistent&&(this.resultdata.length=i-1)),(this.sortFunction||this.sortCriteria)&&this.queueSortPhase()),i=n.length,e=0;i>e;e++)n[e]>t&&n[e]--},p.prototype.mapReduce=function(t,e){try{return e(this.data().map(t))}catch(n){throw n}},d.prototype=new u,d.prototype.ensureIndex=function(n,r){if("undefined"==typeof r&&(r=!1),null===n||void 0===n)throw"Attempting to set index without an associated property";if(!this.binaryIndices.hasOwnProperty(n)||r||this.binaryIndices[n].dirty){this.binaryIndices[n]={name:n,dirty:!0,values:[]};var i,o=this.data.length,s=0;for(i=this.binaryIndices[n],s;o>s;s+=1)i.values.push(s);var a=function(n,r){return function(i,o){var s=r.data[i],a=r.data[o];return s[n]===a[n]?0:e(s[n],a[n])?1:t(s[n],a[n])?-1:void 0}}(n,this);i.values.sort(a),i.dirty=!1,this.dirty=!0}},d.prototype.ensureAllIndexes=function(t){for(var e=Object.keys(this.binaryIndices),n=e.length;n--;)this.ensureIndex(e[n],t);
},d.prototype.flagBinaryIndexesDirty=function(){for(var t=Object.keys(this.binaryIndices),e=t.length;e--;)this.binaryIndices[t[e]].dirty=!0},d.prototype.ensureId=function(){var t=this.data.length,e=0;for(this.idIndex=[],e;t>e;e+=1)this.idIndex.push(this.data[e].$loki)},d.prototype.ensureIdAsync=function(t){this.async(function(){this.ensureId()},t)},d.prototype.addDynamicView=function(t,e){var n=new p(this,t,e);return this.DynamicViews.push(n),n},d.prototype.removeDynamicView=function(t){for(var e=0;e<this.DynamicViews.length;e++)this.DynamicViews[e].name===t&&this.DynamicViews.splice(e,1)},d.prototype.getDynamicView=function(t){for(var e=0;e<this.DynamicViews.length;e++)if(this.DynamicViews[e].name===t)return this.DynamicViews[e];return null},d.prototype.findAndUpdate=function(t,e){var n,r=this.where(t),i=0;try{for(i;i<r.length;i++)n=e(r[i]),this.update(n)}catch(o){this.rollback(),console.error(o.message)}},d.prototype.insert=function(t){if(!t){var e=new Error("Object cannot be null");throw this.emit("error",e),e}var n,r=this,i=Array.isArray(t)?t:[t];return i.forEach(function(t){if("object"!=typeof t)throw new TypeError("Document needs to be an object");return n=r.clone?JSON.parse(JSON.stringify(t)):t,"undefined"==typeof n.meta&&(n.meta={revision:0,created:0}),r.emit("pre-insert",n),r.add(n)?void r.emit("insert",n):void 0}),n},d.prototype.clear=function(){this.data=[],this.idIndex=[],this.binaryIndices={},this.cachedIndex=null,this.cachedData=null,this.maxId=0,this.DynamicViews=[],this.dirty=!0},d.prototype.update=function(t){if(Object.keys(this.binaryIndices).length>0&&this.flagBinaryIndexesDirty(),Array.isArray(t)){var e=0,n=t.length;for(e;n>e;e+=1)this.update(t[e])}else{if(!t.hasOwnProperty("$loki"))throw"Trying to update unsynced document. Please save the document first by using insert() or addMany()";try{this.startTransaction();var r,i,o=this.get(t.$loki,!0),s=this;if(!o)throw new Error("Trying to update a document not in collection.");this.emit("pre-update",t),r=o[0],Object.keys(this.constraints.unique).forEach(function(t){s.constraints.unique[t].update(r)}),i=o[1],this.data[i]=t;for(var a=0;a<this.DynamicViews.length;a++)this.DynamicViews[a].evaluateDocument(i);this.idIndex[i]=r.$loki,this.commit(),this.dirty=!0,this.emit("update",t)}catch(u){throw this.rollback(),console.error(u.message),this.emit("error",u),u}}},d.prototype.add=function(t){var e,n=this.DynamicViews.length;if("object"!=typeof t)throw"Object being added needs to be an object";if(Object.keys(this.binaryIndices).length>0&&this.flagBinaryIndexesDirty(),"undefined"!=typeof t.$loki)throw"Document is already in collection, please use update()";try{this.startTransaction(),this.maxId++;var e;isNaN(this.maxId)&&(this.maxId=this.data[this.data.length-1].$loki+1),t.$loki=this.maxId,t.meta.version=0,this.data.push(t);var r=this;for(Object.keys(this.constraints.unique).forEach(function(e){r.constraints.unique[e].set(t)}),e=0;n>e;e++)this.DynamicViews[e].evaluateDocument(this.data.length-1);return this.idIndex.push(t.$loki),this.commit(),this.dirty=!0,t}catch(i){this.rollback(),console.error(i.message)}},d.prototype.removeWhere=function(t){var e;e="function"==typeof t?this.data.filter(t):new l(this,t);for(var n=e.length;n--;)this.remove(e[n])},d.prototype.removeDataOnly=function(){this.removeWhere(function(t){return!0})},d.prototype.remove=function(t){if("number"==typeof t&&(t=this.get(t)),"object"!=typeof t)throw new Error("Parameter is not an object");if(Array.isArray(t)){var e=0,n=t.length;for(e;n>e;e+=1)this.remove(t[e])}else{if(!t.hasOwnProperty("$loki"))throw new Error("Object is not a document stored in the collection");Object.keys(this.binaryIndices).length>0&&this.flagBinaryIndexesDirty();try{this.startTransaction();var r=this.get(t.$loki,!0),i=r[1],o=this;Object.keys(this.constraints.unique).forEach(function(e){o.constraints.unique[e].remove(t)});for(var s=0;s<this.DynamicViews.length;s++)this.DynamicViews[s].removeDocument(i);this.data.splice(i,1),this.idIndex.splice(i,1),this.commit(),this.dirty=!0,this.emit("delete",r[0])}catch(a){this.rollback(),console.error(a.message),this.emit("error",a)}}},d.prototype.get=function(t,e){var n=e||!1,r=this.idIndex,i=r.length-1,o=0,s=Math.floor(o+(i-o)/2);if(t="number"==typeof t?t:parseInt(t,10),isNaN(t))throw"Passed id is not an integer";for(;r[o]<r[i];)s=Math.floor((o+i)/2),r[s]<t?o=s+1:i=s;return i===o&&r[o]===t?n?[this.data[o],o]:this.data[o]:null},d.prototype.by=function(t,e){var n;return e?this.constraints.unique[t].get(e):(n=this,function(e){return n.by(t,e)})},d.prototype.findOne=function(t){var e=new l(this,t,null,!0);return Array.isArray(e)&&0===e.length?null:e},d.prototype.chain=function(){return new l(this,null,null)},d.prototype.find=function(t){return"undefined"==typeof t&&(t="getAll"),new l(this,t,null)},d.prototype.findOneUnindexed=function(t,e){for(var n,r=this.data.length;r--;)if(this.data[r][t]===e)return n=this.data[r];return null},d.prototype.startTransaction=function(){if(this.transactional){this.cachedData=o(this.data,"parse-stringify"),this.cachedIndex=this.idIndex,this.cachedBinaryIndex=this.binaryIndices;for(var t=0;t<this.DynamicViews.length;t++)this.DynamicViews[t].startTransaction()}},d.prototype.commit=function(){if(this.transactional){this.cachedData=null,this.cachedIndex=null,this.cachedBinaryIndices=null;for(var t=0;t<this.DynamicViews.length;t++)this.DynamicViews[t].commit()}},d.prototype.rollback=function(){if(this.transactional){null!==this.cachedData&&null!==this.cachedIndex&&(this.data=this.cachedData,this.idIndex=this.cachedIndex,this.binaryIndices=this.cachedBinaryIndex);for(var t=0;t<this.DynamicViews.length;t++)this.DynamicViews[t].rollback()}},d.prototype.async=function(t,e){setTimeout(function(){if("function"!=typeof t)throw"Argument passed for async execution is not a function";t(),e()},0)},d.prototype.where=function(t){return new l(this,null,t)},d.prototype.mapReduce=function(t,e){try{return e(this.data.map(t))}catch(n){throw n}},d.prototype.eqJoin=function(t,e,n,r){return new l(this).eqJoin(t,e,n,r)},d.prototype.no_op=function(){},d.prototype.extract=function(t){var e=0,n=this.data.length,r=v(t),i=[];for(e;n>e;e+=1)i.push(b(this.data[e],t,r));return i},d.prototype.max=function(t){return Math.max.apply(null,this.extract(t))},d.prototype.min=function(t){return Math.min.apply(null,this.extract(t))},d.prototype.maxRecord=function(t){var e=0,n=this.data.length,r=v(t),i={index:0,value:void 0},o=void 0;for(e;n>e;e+=1)void 0!==o?o<b(this.data[e],t,r)&&(o=b(this.data[e],t,r),i.index=this.data[e].$loki):(o=b(this.data[e],t,r),i.index=this.data[e].$loki);return i.value=o,i},d.prototype.minRecord=function(t){var e=0,n=this.data.length,r=v(t),i={index:0,value:void 0},o=void 0;for(e;n>e;e+=1)void 0!==o?o>b(this.data[e],t,r)&&(o=b(this.data[e],t,r),i.index=this.data[e].$loki):(o=b(this.data[e],t,r),i.index=this.data[e].$loki);return i.value=o,i},d.prototype.extractNumerical=function(t){return this.extract(t).map(y).filter(Number).filter(function(t){return!isNaN(t)})},d.prototype.avg=function(t){return _(this.extractNumerical(t))},d.prototype.stdDev=function(t){return w(this.extractNumerical(t))},d.prototype.mode=function(t){var e={},n=this.extract(t);n.forEach(function(t){e[t]?e[t]+=1:e[t]=1});var r,i,o=void 0;for(r in e)o?o<e[r]&&(i=r):(i=r,o=e[r]);return i},d.prototype.median=function(t){var e=this.extractNumerical(t);e.sort(g);var n=Math.floor(e.length/2);return e.length%2?e[n]:(e[n-1]+e[n])/2},I.prototype={keys:[],values:[],sort:function(t,e){return e>t?-1:t>e?1:0},setSort:function(t){this.bs=new S(t)},bs:function(){return new S(this.sort)},set:function(t,e){var n=this.bs(this.keys,t);n.found?this.values[n.index]=e:(this.keys.splice(n.index,0,t),this.values.splice(n.index,0,e))},get:function(t){return this.values[x(this.keys,t,this.sort).index]}},k.prototype={keyMap:{},lokiMap:{},set:function(t){if(this.keyMap[t[this.field]])throw new Error("Duplicate key for property "+this.field);this.keyMap[t[this.field]]=t,this.lokiMap[t.$loki]=t[this.field]},get:function(t){return this.keyMap[t]},update:function(t){if(this.lokiMap[t.$loki]!==t[this.field]){var e=this.lokiMap[t.$loki];this.set(t),this.keyMap[e]=void 0}else this.keyMap[t[this.field]]=t},remove:function(t){var e=this.keyMap[t];this.keyMap[t]=void 0,this.lokiMap[e.$loki]=void 0},clear:function(){this.keyMap={},this.lokiMap={}}},O.prototype={set:function(t,e){this.index[t]?this.index[t].push(e):this.index[t]=[e]},remove:function(t,e){var n=this.index[t];for(var r in n)n[r]==e&&n.splice(r,1);n.length<1&&(this.index[t]=void 0)},get:function(t){return this.index[t]},clear:function(t){this.index={}}},E.prototype={keys:[],values:[],sort:function(t,e){return e>t?-1:t>e?1:0},bs:function(){return S(this.sort)},setSort:function(t){this.bs=S(t)},set:function(t,e){var n=x(this.keys,t,this.sort);n.found?this.values[n.index].push(e):(this.keys.splice(n.index,0,t),this.values.splice(n.index,0,[e]))},get:function(t){var e=x(this.keys,t,this.sort);return e.found?this.values[e.index]:[]},getLt:function(t){var e=x(this.keys,t,this.sort),n=e.index;return e.found&&n--,this.getAll(t,0,n)},getGt:function(t){var e=x(this.keys,t,this.sort),n=e.index;return e.found&&n++,this.getAll(t,n,this.keys.length)},getAll:function(t,e,n){for(var r=[],i=e;n>i;i++)r=r.concat(this.values[i]);return r},getPos:function(t){return x(this.keys,t,this.sort)},remove:function(t,e){var n=x(this.keys,t,this.sort).index,r=this.values[n];for(var i in r)r[i]==e&&r.splice(i,1);r.length<1&&(this.keys.splice(n,1),this.values.splice(n,1))},clear:function(t){this.keys=[],this.values=[]}},c.Collection=d,c.KeyValueStore=I,c}()})}).call(e,function(){return this}())},function(t,e,n){function r(){if(!a){a=!0;for(var t,e=s.length;e;){t=s,s=[];for(var n=-1;++n<e;)t[n]();e=s.length}a=!1}}function i(){}var o=t.exports={},s=[],a=!1;o.nextTick=function(t){s.push(t),a||setTimeout(r,0)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=i,o.addListener=i,o.once=i,o.off=i,o.removeListener=i,o.removeAllListeners=i,o.emit=i,o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,n){var r=n(30);t.exports=function(t){var e={init:[],preEmit:[],shouldEmit:[]},n=function i(t){var n={};return t.mixins&&t.mixins.forEach(function(t){r.extend(n,i(t))}),r.extend(n,t),Object.keys(e).forEach(function(n){t.hasOwnProperty(n)&&e[n].push(t[n])}),n}(t);return e.init.length>1&&(n.init=function(){var t=arguments;e.init.forEach(function(e){e.apply(this,t)},this)}),e.preEmit.length>1&&(n.preEmit=function(){return e.preEmit.reduce(function(t,e){var n=e.apply(this,t);return void 0===n?t:[n]}.bind(this),arguments)}),e.shouldEmit.length>1&&(n.shouldEmit=function(){var t=arguments;return!e.shouldEmit.some(function(e){return!e.apply(this,t)},this)}),Object.keys(e).forEach(function(t){1===e[t].length&&(n[t]=e[t][0])}),n}},function(t,e,n){t.exports=function(t,e){for(var n in e)if(Object.getOwnPropertyDescriptor&&Object.defineProperty){var r=Object.getOwnPropertyDescriptor(e,n);if(!r.value||"function"!=typeof r.value||!e.hasOwnProperty(n))continue;t[n]=e[n].bind(t)}else{var i=e[n];if("function"!=typeof i||!e.hasOwnProperty(n))continue;t[n]=i.bind(t)}return t}},function(t,e,n){(function(e){"use strict";var r=n(43),i=n(51),o=n(35),s=!1,a={current:i,withContext:function(t,n){"production"!==e.env.NODE_ENV&&("production"!==e.env.NODE_ENV?o(s,"withContext is deprecated and will be removed in a future version. Use a wrapper component with getChildContext instead."):null,s=!0);var i,u=a.current;a.current=r({},u,t);try{i=n()}finally{a.current=u}return i}};t.exports=a}).call(e,n(38))},function(t,e,n){"use strict";var r={current:null};t.exports=r},function(t,e,n){"use strict";function r(t,e){if(null==t)throw new TypeError("Object.assign target cannot be null or undefined");for(var n=Object(t),r=Object.prototype.hasOwnProperty,i=1;i<arguments.length;i++){var o=arguments[i];if(null!=o){var s=Object(o);for(var a in s)r.call(s,a)&&(n[a]=s[a])}}return n}t.exports=r},function(t,e,n){function r(t){return function(){return t}}function i(){}i.thatReturns=r,i.thatReturnsFalse=r(!1),i.thatReturnsTrue=r(!0),i.thatReturnsNull=r(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(t){return t},t.exports=i},function(t,e,n){"use strict";function r(t){t||(t="");var e,n=arguments.length;if(n>1)for(var r=1;n>r;r++)e=arguments[r],e&&(t=(t?t+" ":"")+e);return t}t.exports=r},function(t,e,n){(function(e,n){/*!
	 *
	 * Copyright 2009-2012 Kris Kowal under the terms of the MIT
	 * license found at http://github.com/kriskowal/q/raw/master/LICENSE
	 *
	 * With parts by Tyler Close
	 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
	 * at http://www.opensource.org/licenses/mit-license.html
	 * Forked at ref_send.js version: 2009-05-11
	 *
	 * With parts by Mark Miller
	 * Copyright (C) 2011 Google Inc.
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 *
	 */
!function(e){"use strict";if("function"==typeof bootstrap)bootstrap("promise",e);else{t.exports=e()}}(function(){"use strict";function t(t){return function(){return G.apply(t,arguments)}}function r(t){return t===Object(t)}function i(t){return"[object StopIteration]"===it(t)||t instanceof K}function o(t,e){if($&&e.stack&&"object"==typeof t&&null!==t&&t.stack&&-1===t.stack.indexOf(ot)){for(var n=[],r=e;r;r=r.source)r.stack&&n.unshift(r.stack);n.unshift(t.stack);var i=n.join("\n"+ot+"\n");t.stack=s(i)}}function s(t){for(var e=t.split("\n"),n=[],r=0;r<e.length;++r){var i=e[r];c(i)||a(i)||!i||n.push(i)}return n.join("\n")}function a(t){return-1!==t.indexOf("(module.js:")||-1!==t.indexOf("(node.js:")}function u(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(t);return r?[r[1],Number(r[2])]:void 0}function c(t){var e=u(t);if(!e)return!1;var n=e[0],r=e[1];return n===W&&r>=J&&ht>=r}function h(){if($)try{throw new Error}catch(t){var e=t.stack.split("\n"),n=e[0].indexOf("@")>0?e[1]:e[2],r=u(n);if(!r)return;return W=r[0],r[1]}}function f(t,e,n){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e+" is deprecated, use "+n+" instead.",new Error("").stack),t.apply(t,arguments)}}function l(t){return t instanceof y?t:w(t)?D(t):j(t)}function p(){function t(t){e=t,o.source=t,Y(n,function(e,n){l.nextTick(function(){t.promiseDispatch.apply(t,n)})},void 0),n=void 0,r=void 0}var e,n=[],r=[],i=et(p.prototype),o=et(y.prototype);if(o.promiseDispatch=function(t,i,o){var s=Q(arguments);n?(n.push(s),"when"===i&&o[1]&&r.push(o[1])):l.nextTick(function(){e.promiseDispatch.apply(e,s)})},o.valueOf=function(){if(n)return o;var t=g(e);return _(t)&&(e=t),t},o.inspect=function(){return e?e.inspect():{state:"pending"}},l.longStackSupport&&$)try{throw new Error}catch(s){o.stack=s.stack.substring(s.stack.indexOf("\n")+1)}return i.promise=o,i.resolve=function(n){e||t(l(n))},i.fulfill=function(n){e||t(j(n))},i.reject=function(n){e||t(E(n))},i.notify=function(t){e||Y(r,function(e,n){l.nextTick(function(){n(t)})},void 0)},i}function d(t){if("function"!=typeof t)throw new TypeError("resolver must be a function.");var e=p();try{t(e.resolve,e.reject,e.notify)}catch(n){e.reject(n)}return e.promise}function v(t){return d(function(e,n){for(var r=0,i=t.length;i>r;r++)l(t[r]).then(e,n)})}function y(t,e,n){void 0===e&&(e=function(t){return E(new Error("Promise does not support operation: "+t))}),void 0===n&&(n=function(){return{state:"unknown"}});var r=et(y.prototype);if(r.promiseDispatch=function(n,i,o){var s;try{s=t[i]?t[i].apply(r,o):e.call(r,i,o)}catch(a){s=E(a)}n&&n(s)},r.inspect=n,n){var i=n();"rejected"===i.state&&(r.exception=i.reason),r.valueOf=function(){var t=n();return"pending"===t.state||"rejected"===t.state?r:t.value}}return r}function m(t,e,n,r){return l(t).then(e,n,r)}function g(t){if(_(t)){var e=t.inspect();if("fulfilled"===e.state)return e.value}return t}function _(t){return t instanceof y}function w(t){return r(t)&&"function"==typeof t.then}function b(t){return _(t)&&"pending"===t.inspect().state}function x(t){return!_(t)||"fulfilled"===t.inspect().state}function S(t){return _(t)&&"rejected"===t.inspect().state}function I(){st.length=0,at.length=0,ct||(ct=!0)}function k(t,n){ct&&("object"==typeof e&&"function"==typeof e.emit&&l.nextTick.runAfter(function(){-1!==Z(at,t)&&(e.emit("unhandledRejection",n,t),ut.push(t))}),at.push(t),st.push(n&&"undefined"!=typeof n.stack?n.stack:"(no stack) "+n))}function O(t){if(ct){var n=Z(at,t);-1!==n&&("object"==typeof e&&"function"==typeof e.emit&&l.nextTick.runAfter(function(){var r=Z(ut,t);-1!==r&&(e.emit("rejectionHandled",st[n],t),ut.splice(r,1))}),at.splice(n,1),st.splice(n,1))}}function E(t){var e=y({when:function(e){return e&&O(this),e?e(t):this}},function(){return this},function(){return{state:"rejected",reason:t}});return k(e,t),e}function j(t){return y({when:function(){return t},get:function(e){return t[e]},set:function(e,n){t[e]=n},"delete":function(e){delete t[e]},post:function(e,n){return null===e||void 0===e?t.apply(void 0,n):t[e].apply(t,n)},apply:function(e,n){return t.apply(e,n)},keys:function(){return rt(t)}},void 0,function(){return{state:"fulfilled",value:t}})}function D(t){var e=p();return l.nextTick(function(){try{t.then(e.resolve,e.reject,e.notify)}catch(n){e.reject(n)}}),e.promise}function A(t){return y({isDef:function(){}},function(e,n){return q(t,e,n)},function(){return l(t).inspect()})}function T(t,e,n){return l(t).spread(e,n)}function P(t){return function(){function e(t,e){var s;if("undefined"==typeof StopIteration){try{s=n[t](e)}catch(a){return E(a)}return s.done?l(s.value):m(s.value,r,o)}try{s=n[t](e)}catch(a){return i(a)?l(a.value):E(a)}return m(s,r,o)}var n=t.apply(this,arguments),r=e.bind(e,"next"),o=e.bind(e,"throw");return r()}}function z(t){l.done(l.async(t)())}function M(t){throw new K(t)}function C(t){return function(){return T([this,R(arguments)],function(e,n){return t.apply(e,n)})}}function q(t,e,n){return l(t).dispatch(e,n)}function R(t){return m(t,function(t){var e=0,n=p();return Y(t,function(r,i,o){var s;_(i)&&"fulfilled"===(s=i.inspect()).state?t[o]=s.value:(++e,m(i,function(r){t[o]=r,0===--e&&n.resolve(t)},n.reject,function(t){n.notify({index:o,value:t})}))},void 0),0===e&&n.resolve(t),n.promise})}function L(t){if(0===t.length)return l.resolve();var e=l.defer(),n=0;return Y(t,function(r,i,o){function s(t){e.resolve(t)}function a(){n--,0===n&&e.reject(new Error("Can't get fulfillment value from any promise, all promises were rejected."))}function u(t){e.notify({index:o,value:t})}var c=t[o];n++,m(c,s,a,u)},void 0),e.promise}function N(t){return m(t,function(t){return t=tt(t,l),m(R(tt(t,function(t){return m(t,H,H)})),function(){return t})})}function V(t){return l(t).allSettled()}function F(t,e){return l(t).then(void 0,void 0,e)}function U(t,e){return l(t).nodeify(e)}var $=!1;try{throw new Error}catch(B){$=!!B.stack}var W,K,J=h(),H=function(){},X=function(){function t(){for(var t,e;i.next;)i=i.next,t=i.task,i.task=void 0,e=i.domain,e&&(i.domain=void 0,e.enter()),r(t,e);for(;c.length;)t=c.pop(),r(t);s=!1}function r(e,n){try{e()}catch(r){if(u)throw n&&n.exit(),setTimeout(t,0),n&&n.enter(),r;setTimeout(function(){throw r},0)}n&&n.exit()}var i={task:void 0,next:null},o=i,s=!1,a=void 0,u=!1,c=[];if(X=function(t){o=o.next={task:t,domain:u&&e.domain,next:null},s||(s=!0,a())},"object"==typeof e&&"[object process]"===e.toString()&&e.nextTick)u=!0,a=function(){e.nextTick(t)};else if("function"==typeof n)a="undefined"!=typeof window?n.bind(window,t):function(){n(t)};else if("undefined"!=typeof MessageChannel){var h=new MessageChannel;h.port1.onmessage=function(){a=f,h.port1.onmessage=t,t()};var f=function(){h.port2.postMessage(0)};a=function(){setTimeout(t,0),f()}}else a=function(){setTimeout(t,0)};return X.runAfter=function(t){c.push(t),s||(s=!0,a())},X}(),G=Function.call,Q=t(Array.prototype.slice),Y=t(Array.prototype.reduce||function(t,e){var n=0,r=this.length;if(1===arguments.length)for(;;){if(n in this){e=this[n++];break}if(++n>=r)throw new TypeError}for(;r>n;n++)n in this&&(e=t(e,this[n],n));return e}),Z=t(Array.prototype.indexOf||function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return e;return-1}),tt=t(Array.prototype.map||function(t,e){var n=this,r=[];return Y(n,function(i,o,s){r.push(t.call(e,o,s,n))},void 0),r}),et=Object.create||function(t){function e(){}return e.prototype=t,new e},nt=t(Object.prototype.hasOwnProperty),rt=Object.keys||function(t){var e=[];for(var n in t)nt(t,n)&&e.push(n);return e},it=t(Object.prototype.toString);K="undefined"!=typeof ReturnValue?ReturnValue:function(t){this.value=t};var ot="From previous event:";l.resolve=l,l.nextTick=X,l.longStackSupport=!1,"object"==typeof e&&e&&e.env&&e.env.Q_DEBUG&&(l.longStackSupport=!0),l.defer=p,p.prototype.makeNodeResolver=function(){var t=this;return function(e,n){e?t.reject(e):t.resolve(arguments.length>2?Q(arguments,1):n)}},l.Promise=d,l.promise=d,d.race=v,d.all=R,d.reject=E,d.resolve=l,l.passByCopy=function(t){return t},y.prototype.passByCopy=function(){return this},l.join=function(t,e){return l(t).join(e)},y.prototype.join=function(t){return l([this,t]).spread(function(t,e){if(t===e)return t;throw new Error("Can't join: not the same: "+t+" "+e)})},l.race=v,y.prototype.race=function(){return this.then(l.race)},l.makePromise=y,y.prototype.toString=function(){return"[object Promise]"},y.prototype.then=function(t,e,n){function r(e){try{return"function"==typeof t?t(e):e}catch(n){return E(n)}}function i(t){if("function"==typeof e){o(t,a);try{return e(t)}catch(n){return E(n)}}return E(t)}function s(t){return"function"==typeof n?n(t):t}var a=this,u=p(),c=!1;return l.nextTick(function(){a.promiseDispatch(function(t){c||(c=!0,u.resolve(r(t)))},"when",[function(t){c||(c=!0,u.resolve(i(t)))}])}),a.promiseDispatch(void 0,"when",[void 0,function(t){var e,n=!1;try{e=s(t)}catch(r){if(n=!0,!l.onerror)throw r;l.onerror(r)}n||u.notify(e)}]),u.promise},l.tap=function(t,e){return l(t).tap(e)},y.prototype.tap=function(t){return t=l(t),this.then(function(e){return t.fcall(e).thenResolve(e)})},l.when=m,y.prototype.thenResolve=function(t){return this.then(function(){return t})},l.thenResolve=function(t,e){return l(t).thenResolve(e)},y.prototype.thenReject=function(t){return this.then(function(){throw t})},l.thenReject=function(t,e){return l(t).thenReject(e)},l.nearer=g,l.isPromise=_,l.isPromiseAlike=w,l.isPending=b,y.prototype.isPending=function(){return"pending"===this.inspect().state},l.isFulfilled=x,y.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},l.isRejected=S,y.prototype.isRejected=function(){return"rejected"===this.inspect().state};var st=[],at=[],ut=[],ct=!0;l.resetUnhandledRejections=I,l.getUnhandledReasons=function(){return st.slice()},l.stopUnhandledRejectionTracking=function(){I(),ct=!1},I(),l.reject=E,l.fulfill=j,l.master=A,l.spread=T,y.prototype.spread=function(t,e){return this.all().then(function(e){return t.apply(void 0,e)},e)},l.async=P,l.spawn=z,l["return"]=M,l.promised=C,l.dispatch=q,y.prototype.dispatch=function(t,e){var n=this,r=p();return l.nextTick(function(){n.promiseDispatch(r.resolve,t,e)}),r.promise},l.get=function(t,e){return l(t).dispatch("get",[e])},y.prototype.get=function(t){return this.dispatch("get",[t])},l.set=function(t,e,n){return l(t).dispatch("set",[e,n])},y.prototype.set=function(t,e){return this.dispatch("set",[t,e])},l.del=l["delete"]=function(t,e){return l(t).dispatch("delete",[e])},y.prototype.del=y.prototype["delete"]=function(t){return this.dispatch("delete",[t])},l.mapply=l.post=function(t,e,n){return l(t).dispatch("post",[e,n])},y.prototype.mapply=y.prototype.post=function(t,e){return this.dispatch("post",[t,e])},l.send=l.mcall=l.invoke=function(t,e){return l(t).dispatch("post",[e,Q(arguments,2)])},y.prototype.send=y.prototype.mcall=y.prototype.invoke=function(t){return this.dispatch("post",[t,Q(arguments,1)])},l.fapply=function(t,e){return l(t).dispatch("apply",[void 0,e])},y.prototype.fapply=function(t){return this.dispatch("apply",[void 0,t])},l["try"]=l.fcall=function(t){return l(t).dispatch("apply",[void 0,Q(arguments,1)])},y.prototype.fcall=function(){return this.dispatch("apply",[void 0,Q(arguments)])},l.fbind=function(t){var e=l(t),n=Q(arguments,1);return function(){return e.dispatch("apply",[this,n.concat(Q(arguments))])}},y.prototype.fbind=function(){var t=this,e=Q(arguments);return function(){return t.dispatch("apply",[this,e.concat(Q(arguments))])}},l.keys=function(t){return l(t).dispatch("keys",[])},y.prototype.keys=function(){return this.dispatch("keys",[])},l.all=R,y.prototype.all=function(){return R(this)},l.any=L,y.prototype.any=function(){return L(this)},l.allResolved=f(N,"allResolved","allSettled"),y.prototype.allResolved=function(){return N(this)},l.allSettled=V,y.prototype.allSettled=function(){return this.then(function(t){return R(tt(t,function(t){function e(){return t.inspect()}return t=l(t),t.then(e,e)}))})},l.fail=l["catch"]=function(t,e){return l(t).then(void 0,e)},y.prototype.fail=y.prototype["catch"]=function(t){return this.then(void 0,t)},l.progress=F,y.prototype.progress=function(t){return this.then(void 0,void 0,t)},l.fin=l["finally"]=function(t,e){return l(t)["finally"](e)},y.prototype.fin=y.prototype["finally"]=function(t){return t=l(t),this.then(function(e){return t.fcall().then(function(){return e})},function(e){return t.fcall().then(function(){throw e})})},l.done=function(t,e,n,r){return l(t).done(e,n,r)},y.prototype.done=function(t,n,r){var i=function(t){l.nextTick(function(){if(o(t,s),!l.onerror)throw t;l.onerror(t)})},s=t||n||r?this.then(t,n,r):this;"object"==typeof e&&e&&e.domain&&(i=e.domain.bind(i)),s.then(void 0,i)},l.timeout=function(t,e,n){return l(t).timeout(e,n)},y.prototype.timeout=function(t,e){var n=p(),r=setTimeout(function(){e&&"string"!=typeof e||(e=new Error(e||"Timed out after "+t+" ms"),e.code="ETIMEDOUT"),n.reject(e)},t);return this.then(function(t){clearTimeout(r),n.resolve(t)},function(t){clearTimeout(r),n.reject(t)},n.notify),n.promise},l.delay=function(t,e){return void 0===e&&(e=t,t=void 0),l(t).delay(e)},y.prototype.delay=function(t){return this.then(function(e){var n=p();return setTimeout(function(){n.resolve(e)},t),n.promise})},l.nfapply=function(t,e){return l(t).nfapply(e)},y.prototype.nfapply=function(t){var e=p(),n=Q(t);return n.push(e.makeNodeResolver()),this.fapply(n).fail(e.reject),e.promise},l.nfcall=function(t){var e=Q(arguments,1);return l(t).nfapply(e)},y.prototype.nfcall=function(){var t=Q(arguments),e=p();return t.push(e.makeNodeResolver()),this.fapply(t).fail(e.reject),e.promise},l.nfbind=l.denodeify=function(t){var e=Q(arguments,1);return function(){var n=e.concat(Q(arguments)),r=p();return n.push(r.makeNodeResolver()),l(t).fapply(n).fail(r.reject),r.promise}},y.prototype.nfbind=y.prototype.denodeify=function(){var t=Q(arguments);return t.unshift(this),l.denodeify.apply(void 0,t)},l.nbind=function(t,e){var n=Q(arguments,2);return function(){function r(){return t.apply(e,arguments)}var i=n.concat(Q(arguments)),o=p();return i.push(o.makeNodeResolver()),l(r).fapply(i).fail(o.reject),o.promise}},y.prototype.nbind=function(){var t=Q(arguments,0);return t.unshift(this),l.nbind.apply(void 0,t)},l.nmapply=l.npost=function(t,e,n){return l(t).npost(e,n)},y.prototype.nmapply=y.prototype.npost=function(t,e){var n=Q(e||[]),r=p();return n.push(r.makeNodeResolver()),this.dispatch("post",[t,n]).fail(r.reject),r.promise},l.nsend=l.nmcall=l.ninvoke=function(t,e){var n=Q(arguments,2),r=p();return n.push(r.makeNodeResolver()),l(t).dispatch("post",[e,n]).fail(r.reject),r.promise},y.prototype.nsend=y.prototype.nmcall=y.prototype.ninvoke=function(t){var e=Q(arguments,1),n=p();return e.push(n.makeNodeResolver()),this.dispatch("post",[t,e]).fail(n.reject),n.promise},l.nodeify=U,y.prototype.nodeify=function(t){return t?void this.then(function(e){l.nextTick(function(){t(null,e)})},function(e){l.nextTick(function(){t(e)})}):this},l.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var ht=h();return l})}).call(e,n(38),n(52).setImmediate)},function(t,e,n){"use strict";function r(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function i(){}i.prototype._events=void 0,i.prototype.listeners=function(t){if(!this._events||!this._events[t])return[];if(this._events[t].fn)return[this._events[t].fn];for(var e=0,n=this._events[t].length,r=new Array(n);n>e;e++)r[e]=this._events[t][e].fn;return r},i.prototype.emit=function(t,e,n,r,i,o){if(!this._events||!this._events[t])return!1;var s,a,u=this._events[t],c=arguments.length;if("function"==typeof u.fn){switch(u.once&&this.removeListener(t,u.fn,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,n),!0;case 4:return u.fn.call(u.context,e,n,r),!0;case 5:return u.fn.call(u.context,e,n,r,i),!0;case 6:return u.fn.call(u.context,e,n,r,i,o),!0}for(a=1,s=new Array(c-1);c>a;a++)s[a-1]=arguments[a];u.fn.apply(u.context,s)}else{var h,f=u.length;for(a=0;f>a;a++)switch(u[a].once&&this.removeListener(t,u[a].fn,!0),c){case 1:u[a].fn.call(u[a].context);break;case 2:u[a].fn.call(u[a].context,e);break;case 3:u[a].fn.call(u[a].context,e,n);break;default:if(!s)for(h=1,s=new Array(c-1);c>h;h++)s[h-1]=arguments[h];u[a].fn.apply(u[a].context,s)}}return!0},i.prototype.on=function(t,e,n){var i=new r(e,n||this);return this._events||(this._events={}),this._events[t]?this._events[t].fn?this._events[t]=[this._events[t],i]:this._events[t].push(i):this._events[t]=i,this},i.prototype.once=function(t,e,n){var i=new r(e,n||this,!0);return this._events||(this._events={}),this._events[t]?this._events[t].fn?this._events[t]=[this._events[t],i]:this._events[t].push(i):this._events[t]=i,this},i.prototype.removeListener=function(t,e,n){if(!this._events||!this._events[t])return this;var r=this._events[t],i=[];if(e&&(r.fn&&(r.fn!==e||n&&!r.once)&&i.push(r),!r.fn))for(var o=0,s=r.length;s>o;o++)(r[o].fn!==e||n&&!r[o].once)&&i.push(r[o]);return i.length?this._events[t]=1===i.length?i[0]:i:delete this._events[t],this},i.prototype.removeAllListeners=function(t){return this._events?(t?delete this._events[t]:this._events={},this):this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prototype.setMaxListeners=function(){return this},i.EventEmitter=i,i.EventEmitter2=i,i.EventEmitter3=i,t.exports=i},function(t,e,n){var r;(function(i,o){/*! Native Promise Only
	    v0.7.6-a (c) Kyle Simpson
	    MIT License: http://getify.mit-license.org
	*/
!function(i,o,s){o[i]=o[i]||s(),"undefined"!=typeof t&&t.exports?t.exports=o[i]:!0&&n(53)&&(r=function(){return o[i]}.call(e,n,e,t),!(void 0!==r&&(t.exports=r)))}("Promise","undefined"!=typeof i?i:this,function(){"use strict";function t(t,e){p.add(t,e),l||(l=v(p.drain))}function e(t){var e,n=typeof t;return null==t||"object"!=n&&"function"!=n||(e=t.then),"function"==typeof e?e:!1}function n(){for(var t=0;t<this.chain.length;t++)r(this,1===this.state?this.chain[t].success:this.chain[t].failure,this.chain[t]);this.chain.length=0}function r(t,n,r){var i,o;try{n===!1?r.reject(t.msg):(i=n===!0?t.msg:n.call(void 0,t.msg),i===r.promise?r.reject(TypeError("Promise-chain cycle")):(o=e(i))?o.call(i,r.resolve,r.reject):r.resolve(i))}catch(s){r.reject(s)}}function i(r){var o,a,c=this;if(!c.triggered){c.triggered=!0,c.def&&(c=c.def);try{(o=e(r))?(a=new u(c),o.call(r,function(){i.apply(a,arguments)},function(){s.apply(a,arguments)})):(c.msg=r,c.state=1,c.chain.length>0&&t(n,c))}catch(h){s.call(a||new u(c),h)}}}function s(e){var r=this;r.triggered||(r.triggered=!0,r.def&&(r=r.def),r.msg=e,r.state=2,r.chain.length>0&&t(n,r))}function a(t,e,n,r){for(var i=0;i<e.length;i++)!function(i){t.resolve(e[i]).then(function(t){n(i,t)},r)}(i)}function u(t){this.def=t,this.triggered=!1}function c(t){this.promise=t,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function h(e){if("function"!=typeof e)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var r=new c(this);this.then=function(e,i){var o={success:"function"==typeof e?e:!0,failure:"function"==typeof i?i:!1};return o.promise=new this.constructor(function(t,e){if("function"!=typeof t||"function"!=typeof e)throw TypeError("Not a function");o.resolve=t,o.reject=e}),r.chain.push(o),0!==r.state&&t(n,r),o.promise},this["catch"]=function(t){return this.then(void 0,t)};try{e.call(void 0,function(t){i.call(r,t)},function(t){s.call(r,t)})}catch(o){s.call(r,o)}}var f,l,p,d=Object.prototype.toString,v="undefined"!=typeof o?function(t){return o(t)}:setTimeout;try{Object.defineProperty({},"x",{}),f=function(t,e,n,r){return Object.defineProperty(t,e,{value:n,writable:!0,configurable:r!==!1})}}catch(y){f=function(t,e,n){return t[e]=n,t}}p=function(){function t(t,e){this.fn=t,this.self=e,this.next=void 0}var e,n,r;return{add:function(i,o){r=new t(i,o),n?n.next=r:e=r,n=r,r=void 0},drain:function(){var t=e;for(e=n=l=void 0;t;)t.fn.call(t.self),t=t.next}}}();var m=f({},"constructor",h,!1);return f(h,"prototype",m,!1),f(m,"__NPO__",0,!1),f(h,"resolve",function(t){var e=this;return t&&"object"==typeof t&&1===t.__NPO__?t:new e(function(e,n){if("function"!=typeof e||"function"!=typeof n)throw TypeError("Not a function");e(t)})}),f(h,"reject",function(t){return new this(function(e,n){if("function"!=typeof e||"function"!=typeof n)throw TypeError("Not a function");n(t)})}),f(h,"all",function(t){var e=this;return"[object Array]"!=d.call(t)?e.reject(TypeError("Not an array")):0===t.length?e.resolve([]):new e(function(n,r){if("function"!=typeof n||"function"!=typeof r)throw TypeError("Not a function");var i=t.length,o=Array(i),s=0;a(e,t,function(t,e){o[t]=e,++s===i&&n(o)},r)})}),f(h,"race",function(t){var e=this;return"[object Array]"!=d.call(t)?e.reject(TypeError("Not an array")):new e(function(n,r){if("function"!=typeof n||"function"!=typeof r)throw TypeError("Not a function");a(e,t,function(t,e){n(e)},r)})}),h})}).call(e,function(){return this}(),n(52).setImmediate)},function(t,e,n){console.log("I'm `fs` modules")},function(t,e,n){function r(){}function i(t){var e={}.toString.call(t);switch(e){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function o(t){return t===Object(t)}function s(t){if(!o(t))return t;var e=[];for(var n in t)null!=t[n]&&e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e.join("&")}function a(t){for(var e,n,r={},i=t.split("&"),o=0,s=i.length;s>o;++o)n=i[o],e=n.split("="),r[decodeURIComponent(e[0])]=decodeURIComponent(e[1]);return r}function u(t){var e,n,r,i,o=t.split(/\r?\n/),s={};o.pop();for(var a=0,u=o.length;u>a;++a)n=o[a],e=n.indexOf(":"),r=n.slice(0,e).toLowerCase(),i=m(n.slice(e+1)),s[r]=i;return s}function c(t){return t.split(/ *; */).shift()}function h(t){return v(t.split(/ *; */),function(t,e){var n=e.split(/ *= */),r=n.shift(),i=n.shift();return r&&i&&(t[r]=i),t},{})}function f(t,e){e=e||{},this.req=t,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||"undefined"==typeof this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText,this.setStatusProperties(this.xhr.status),this.header=this.headers=u(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text?this.text:this.xhr.response):null}function l(t,e){var n=this;d.call(this),this._query=this._query||[],this.method=t,this.url=e,this.header={},this._header={},this.on("end",function(){var t=null,e=null;try{e=new f(n)}catch(r){return t=new Error("Parser is unable to parse the response"),t.parse=!0,t.original=r,n.callback(t)}if(n.emit("response",e),t)return n.callback(t,e);if(e.status>=200&&e.status<300)return n.callback(t,e);var i=new Error(e.statusText||"Unsuccessful HTTP response");i.original=t,i.response=e,i.status=e.status,n.callback(t||i,e)})}function p(t,e){return"function"==typeof e?new l("GET",t).end(e):1==arguments.length?new l("GET",t):new l(t,e)}var d=n(55),v=n(54),y="undefined"==typeof window?this||self:window;p.getXHR=function(){if(!(!y.XMLHttpRequest||y.location&&"file:"==y.location.protocol&&y.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}return!1};var m="".trim?function(t){return t.trim()}:function(t){return t.replace(/(^\s*|\s*$)/g,"")};p.serializeObject=s,p.parseString=a,p.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},p.serialize={"application/x-www-form-urlencoded":s,"application/json":JSON.stringify},p.parse={"application/x-www-form-urlencoded":a,"application/json":JSON.parse},f.prototype.get=function(t){return this.header[t.toLowerCase()]},f.prototype.setHeaderProperties=function(t){var e=this.header["content-type"]||"";this.type=c(e);var n=h(e);for(var r in n)this[r]=n[r]},f.prototype.parseBody=function(t){var e=p.parse[this.type];return e&&t&&(t.length||t instanceof Object)?e(t):null},f.prototype.setStatusProperties=function(t){1223===t&&(t=204);var e=t/100|0;this.status=t,this.statusType=e,this.info=1==e,this.ok=2==e,this.clientError=4==e,this.serverError=5==e,this.error=4==e||5==e?this.toError():!1,this.accepted=202==t,this.noContent=204==t,this.badRequest=400==t,this.unauthorized=401==t,this.notAcceptable=406==t,this.notFound=404==t,this.forbidden=403==t},f.prototype.toError=function(){var t=this.req,e=t.method,n=t.url,r="cannot "+e+" "+n+" ("+this.status+")",i=new Error(r);return i.status=this.status,i.method=e,i.url=n,i},p.Response=f,d(l.prototype),l.prototype.use=function(t){return t(this),this},l.prototype.timeout=function(t){return this._timeout=t,this},l.prototype.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},l.prototype.abort=function(){return this.aborted?void 0:(this.aborted=!0,this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this)},l.prototype.set=function(t,e){if(o(t)){for(var n in t)this.set(n,t[n]);return this}return this._header[t.toLowerCase()]=e,this.header[t]=e,this},l.prototype.unset=function(t){return delete this._header[t.toLowerCase()],delete this.header[t],this},l.prototype.getHeader=function(t){return this._header[t.toLowerCase()]},l.prototype.type=function(t){return this.set("Content-Type",p.types[t]||t),this},l.prototype.accept=function(t){return this.set("Accept",p.types[t]||t),this},l.prototype.auth=function(t,e){var n=btoa(t+":"+e);return this.set("Authorization","Basic "+n),this},l.prototype.query=function(t){return"string"!=typeof t&&(t=s(t)),t&&this._query.push(t),this},l.prototype.field=function(t,e){return this._formData||(this._formData=new y.FormData),this._formData.append(t,e),this},l.prototype.attach=function(t,e,n){return this._formData||(this._formData=new y.FormData),this._formData.append(t,e,n),this},l.prototype.send=function(t){var e=o(t),n=this.getHeader("Content-Type");if(e&&o(this._data))for(var r in t)this._data[r]=t[r];else"string"==typeof t?(n||this.type("form"),n=this.getHeader("Content-Type"),"application/x-www-form-urlencoded"==n?this._data=this._data?this._data+"&"+t:t:this._data=(this._data||"")+t):this._data=t;return!e||i(t)?this:(n||this.type("json"),this)},l.prototype.callback=function(t,e){var n=this._callback;this.clearTimeout(),n(t,e)},l.prototype.crossDomainError=function(){var t=new Error("Origin is not allowed by Access-Control-Allow-Origin");t.crossDomain=!0,this.callback(t)},l.prototype.timeoutError=function(){var t=this._timeout,e=new Error("timeout of "+t+"ms exceeded");e.timeout=t,this.callback(e)},l.prototype.withCredentials=function(){return this._withCredentials=!0,this},l.prototype.end=function(t){var e=this,n=this.xhr=p.getXHR(),o=this._query.join("&"),s=this._timeout,a=this._formData||this._data;this._callback=t||r,n.onreadystatechange=function(){if(4==n.readyState){var t;try{t=n.status}catch(r){t=0}if(0==t){if(e.timedout)return e.timeoutError();if(e.aborted)return;return e.crossDomainError()}e.emit("end")}};var u=function(t){t.total>0&&(t.percent=t.loaded/t.total*100),e.emit("progress",t)};this.hasListeners("progress")&&(n.onprogress=u);try{n.upload&&this.hasListeners("progress")&&(n.upload.onprogress=u)}catch(c){}if(s&&!this._timer&&(this._timer=setTimeout(function(){e.timedout=!0,e.abort()},s)),o&&(o=p.serializeObject(o),this.url+=~this.url.indexOf("?")?"&"+o:"?"+o),n.open(this.method,this.url,!0),this._withCredentials&&(n.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof a&&!i(a)){var h=p.serialize[this.getHeader("Content-Type")];h&&(a=h(a))}for(var f in this.header)null!=this.header[f]&&n.setRequestHeader(f,this.header[f]);return this.emit("request",this),n.send(a),this},p.Request=l,p.get=function(t,e,n){var r=p("GET",t);return"function"==typeof e&&(n=e,e=null),e&&r.query(e),n&&r.end(n),r},p.head=function(t,e,n){var r=p("HEAD",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},p.del=function(t,e){var n=p("DELETE",t);return e&&n.end(e),n},p.patch=function(t,e,n){var r=p("PATCH",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},p.post=function(t,e,n){var r=p("POST",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},p.put=function(t,e,n){var r=p("PUT",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},t.exports=p},function(t,e,n){(function(e){"use strict";var n={};"production"!==e.env.NODE_ENV&&Object.freeze(n),t.exports=n}).call(e,n(38))},function(t,e,n){(function(t,r){function i(t,e){this._id=t,this._clearFn=e}var o=n(56).nextTick,s=Function.prototype.apply,a=Array.prototype.slice,u={},c=0;e.setTimeout=function(){return new i(s.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new i(s.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},e.setImmediate="function"==typeof t?t:function(t){var n=c++,r=arguments.length<2?!1:a.call(arguments,1);return u[n]=!0,o(function(){u[n]&&(r?t.apply(null,r):t.call(null),e.clearImmediate(n))}),n},e.clearImmediate="function"==typeof r?r:function(t){delete u[t]}}).call(e,n(52).setImmediate,n(52).clearImmediate)},function(t,e,n){(function(e){t.exports=e}).call(e,{})},function(t,e,n){t.exports=function(t,e,n){for(var r=0,i=t.length,o=3==arguments.length?n:t[r++];i>r;)o=e.call(null,o,t[r],++r,t);return o}},function(t,e,n){function r(t){return t?i(t):void 0}function i(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}t.exports=r,r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},r.prototype.once=function(t,e){function n(){r.off(t,n),e.apply(this,arguments)}var r=this;return this._callbacks=this._callbacks||{},n.fn=e,this.on(t,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[t];if(!n)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===e||r.fn===e){n.splice(i,1);break}return this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks[t];if(n){n=n.slice(0);for(var r=0,i=n.length;i>r;++r)n[r].apply(this,e)}return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e,n){function r(){h=!1,a.length?c=a.concat(c):f=-1,c.length&&i()}function i(){if(!h){var t=setTimeout(r);h=!0;for(var e=c.length;e;){for(a=c,c=[];++f<e;)a[f].run();f=-1,e=c.length}a=null,h=!1,clearTimeout(t)}}function o(t,e){this.fun=t,this.array=e}function s(){}var a,u=t.exports={},c=[],h=!1,f=-1;u.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new o(t,e)),h||setTimeout(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=s,u.addListener=s,u.once=s,u.off=s,u.removeListener=s,u.removeAllListeners=s,u.emit=s,u.binding=function(t){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(t){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}}])});